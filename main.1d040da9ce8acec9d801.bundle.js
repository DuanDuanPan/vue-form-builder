(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1194:function(module,exports,__webpack_require__){var map={"./antd/FormBuilder.stories.js":1483,"./elementui/FormBuilder.stories.js":1484,"./viewui/FormBuilder.stories.js":1485};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1194},1307:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_cjs_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ExampleName_vue_vue_type_style_index_0_id_c7909662_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(298);__webpack_require__.n(_node_modules_style_loader_dist_cjs_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ExampleName_vue_vue_type_style_index_0_id_c7909662_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},1308:function(module,exports,__webpack_require__){(exports=__webpack_require__(122)(!1)).push([module.i,".input-addon-after[data-v-c7909662]{cursor:pointer}",""]),module.exports=exports},1360:function(module,exports,__webpack_require__){var api=__webpack_require__(121),content=__webpack_require__(1361);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1361:function(module,exports,__webpack_require__){(exports=__webpack_require__(122)(!1)).push([module.i,".form-builder-example{padding:10px}.form-builder-example .ant-card{margin-bottom:15px}.form-builder-example .ant-card .ant-card-head-title{padding:10px 0px}",""]),module.exports=exports},1405:function(module,exports,__webpack_require__){var map={"./af":625,"./af.js":625,"./ar":626,"./ar-dz":627,"./ar-dz.js":627,"./ar-kw":628,"./ar-kw.js":628,"./ar-ly":629,"./ar-ly.js":629,"./ar-ma":630,"./ar-ma.js":630,"./ar-sa":631,"./ar-sa.js":631,"./ar-tn":632,"./ar-tn.js":632,"./ar.js":626,"./az":633,"./az.js":633,"./be":634,"./be.js":634,"./bg":635,"./bg.js":635,"./bm":636,"./bm.js":636,"./bn":637,"./bn.js":637,"./bo":638,"./bo.js":638,"./br":639,"./br.js":639,"./bs":640,"./bs.js":640,"./ca":641,"./ca.js":641,"./cs":642,"./cs.js":642,"./cv":643,"./cv.js":643,"./cy":644,"./cy.js":644,"./da":645,"./da.js":645,"./de":646,"./de-at":647,"./de-at.js":647,"./de-ch":648,"./de-ch.js":648,"./de.js":646,"./dv":649,"./dv.js":649,"./el":650,"./el.js":650,"./en-au":651,"./en-au.js":651,"./en-ca":652,"./en-ca.js":652,"./en-gb":653,"./en-gb.js":653,"./en-ie":654,"./en-ie.js":654,"./en-il":655,"./en-il.js":655,"./en-in":656,"./en-in.js":656,"./en-nz":657,"./en-nz.js":657,"./en-sg":658,"./en-sg.js":658,"./eo":659,"./eo.js":659,"./es":660,"./es-do":661,"./es-do.js":661,"./es-us":662,"./es-us.js":662,"./es.js":660,"./et":663,"./et.js":663,"./eu":664,"./eu.js":664,"./fa":665,"./fa.js":665,"./fi":666,"./fi.js":666,"./fil":667,"./fil.js":667,"./fo":668,"./fo.js":668,"./fr":669,"./fr-ca":670,"./fr-ca.js":670,"./fr-ch":671,"./fr-ch.js":671,"./fr.js":669,"./fy":672,"./fy.js":672,"./ga":673,"./ga.js":673,"./gd":674,"./gd.js":674,"./gl":675,"./gl.js":675,"./gom-deva":676,"./gom-deva.js":676,"./gom-latn":677,"./gom-latn.js":677,"./gu":678,"./gu.js":678,"./he":679,"./he.js":679,"./hi":680,"./hi.js":680,"./hr":681,"./hr.js":681,"./hu":682,"./hu.js":682,"./hy-am":683,"./hy-am.js":683,"./id":684,"./id.js":684,"./is":685,"./is.js":685,"./it":686,"./it-ch":687,"./it-ch.js":687,"./it.js":686,"./ja":688,"./ja.js":688,"./jv":689,"./jv.js":689,"./ka":690,"./ka.js":690,"./kk":691,"./kk.js":691,"./km":692,"./km.js":692,"./kn":693,"./kn.js":693,"./ko":694,"./ko.js":694,"./ku":695,"./ku.js":695,"./ky":696,"./ky.js":696,"./lb":697,"./lb.js":697,"./lo":698,"./lo.js":698,"./lt":699,"./lt.js":699,"./lv":700,"./lv.js":700,"./me":701,"./me.js":701,"./mi":702,"./mi.js":702,"./mk":703,"./mk.js":703,"./ml":704,"./ml.js":704,"./mn":705,"./mn.js":705,"./mr":706,"./mr.js":706,"./ms":707,"./ms-my":708,"./ms-my.js":708,"./ms.js":707,"./mt":709,"./mt.js":709,"./my":710,"./my.js":710,"./nb":711,"./nb.js":711,"./ne":712,"./ne.js":712,"./nl":713,"./nl-be":714,"./nl-be.js":714,"./nl.js":713,"./nn":715,"./nn.js":715,"./oc-lnc":716,"./oc-lnc.js":716,"./pa-in":717,"./pa-in.js":717,"./pl":718,"./pl.js":718,"./pt":719,"./pt-br":720,"./pt-br.js":720,"./pt.js":719,"./ro":721,"./ro.js":721,"./ru":722,"./ru.js":722,"./sd":723,"./sd.js":723,"./se":724,"./se.js":724,"./si":725,"./si.js":725,"./sk":726,"./sk.js":726,"./sl":727,"./sl.js":727,"./sq":728,"./sq.js":728,"./sr":729,"./sr-cyrl":730,"./sr-cyrl.js":730,"./sr.js":729,"./ss":731,"./ss.js":731,"./sv":732,"./sv.js":732,"./sw":733,"./sw.js":733,"./ta":734,"./ta.js":734,"./te":735,"./te.js":735,"./tet":736,"./tet.js":736,"./tg":737,"./tg.js":737,"./th":738,"./th.js":738,"./tl-ph":739,"./tl-ph.js":739,"./tlh":740,"./tlh.js":740,"./tr":741,"./tr.js":741,"./tzl":742,"./tzl.js":742,"./tzm":743,"./tzm-latn":744,"./tzm-latn.js":744,"./tzm.js":743,"./ug-cn":745,"./ug-cn.js":745,"./uk":746,"./uk.js":746,"./ur":747,"./ur.js":747,"./uz":748,"./uz-latn":749,"./uz-latn.js":749,"./uz.js":748,"./vi":750,"./vi.js":750,"./x-pseudo":751,"./x-pseudo.js":751,"./yo":752,"./yo.js":752,"./zh-cn":753,"./zh-cn.js":753,"./zh-hk":754,"./zh-hk.js":754,"./zh-mo":755,"./zh-mo.js":755,"./zh-tw":756,"./zh-tw.js":756};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1405},1465:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_cjs_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ElementFormAdaptor_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(299);__webpack_require__.n(_node_modules_style_loader_dist_cjs_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ElementFormAdaptor_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__).a},1466:function(module,exports,__webpack_require__){(exports=__webpack_require__(122)(!1)).push([module.i,".el-form-item__tip{font-size:12px;line-height:12px;padding:10px 0 5px 0;color:#737373}",""]),module.exports=exports},1471:function(module,exports,__webpack_require__){var api=__webpack_require__(121),content=__webpack_require__(1472);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1472:function(module,exports,__webpack_require__){(exports=__webpack_require__(122)(!1)).push([module.i,".form-builder-example{padding:10px}.form-builder-example .el-card{margin-bottom:15px}.form-builder-example .el-card .el-card__header{padding:10px 20px}",""]),module.exports=exports},1473:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_cjs_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ViewFormAdaptor_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(300);__webpack_require__.n(_node_modules_style_loader_dist_cjs_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ViewFormAdaptor_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__).a},1474:function(module,exports,__webpack_require__){(exports=__webpack_require__(122)(!1)).push([module.i,".ivu-form-item-tip{font-size:12px;line-height:12px;padding:10px 0 5px 0;color:#737373}",""]),module.exports=exports},1481:function(module,exports,__webpack_require__){var api=__webpack_require__(121),content=__webpack_require__(1482);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1482:function(module,exports,__webpack_require__){(exports=__webpack_require__(122)(!1)).push([module.i,".form-builder-example{padding:10px}.form-builder-example .ivu-form{position:relative}.form-builder-example .ivu-card{margin-bottom:15px}.form-builder-example .ivu-card .ivu-card-header{padding:10px 20px}",""]),module.exports=exports},1483:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"BasicUsage",(function(){return BasicUsage}));__webpack_require__(53),__webpack_require__(51),__webpack_require__(166),__webpack_require__(60),__webpack_require__(61);var define_property=__webpack_require__(101),define_property_default=__webpack_require__.n(define_property),define_properties=__webpack_require__(102),define_properties_default=__webpack_require__.n(define_properties),get_own_property_descriptors=__webpack_require__(54),get_own_property_descriptors_default=__webpack_require__.n(get_own_property_descriptors),for_each=__webpack_require__(40),for_each_default=__webpack_require__.n(for_each),get_own_property_descriptor=__webpack_require__(55),get_own_property_descriptor_default=__webpack_require__.n(get_own_property_descriptor),filter=__webpack_require__(48),filter_default=__webpack_require__.n(filter),get_own_property_symbols=__webpack_require__(56),get_own_property_symbols_default=__webpack_require__.n(get_own_property_symbols),object_keys=__webpack_require__(103),keys_default=__webpack_require__.n(object_keys),regenerator=__webpack_require__(26),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(157),__webpack_require__(57)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),concat=__webpack_require__(104),concat_default=__webpack_require__.n(concat),set_timeout=__webpack_require__(184),set_timeout_default=__webpack_require__.n(set_timeout),promise=__webpack_require__(49),promise_default=__webpack_require__.n(promise),stringify=__webpack_require__(135),stringify_default=__webpack_require__.n(stringify),defineProperty=__webpack_require__(74),defineProperty_default=__webpack_require__.n(defineProperty),vue_esm=__webpack_require__(12),vue_composition_api_module=__webpack_require__(25),index_esm=__webpack_require__(16),es=__webpack_require__(797),vee_validate_full=__webpack_require__(58),src=__webpack_require__(190),adaptors_AntFormAdaptorvue_type_script_lang_js_={name:"ant-form-adaptor",props:{tip:String,tooltip:String,name:String,size:{type:String,default:"default"},label:String,rules:{type:[String,Object]},value:{required:!1},props:{type:Object,default:function _default(){return{}},required:!1},items:{type:Array,default:function _default(){return[]},required:!1},extend:{type:Object,default:function _default(){return{}}},metadata:{type:Object,default:function _default(){return{}}},formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{}},computed:{component:function component(){return this.extend.component||"a-input"},isSelect:function isSelect(){return"a-select"===this.component},isMultipleSelect:function isMultipleSelect(){return this.isSelect&&this.props.multiple},isRadio:function isRadio(){return"a-radio-group"===this.component},isCheckbox:function isCheckbox(){return"a-checkbox-group"===this.component}},created:function created(){var localValue=this.localValue,isMultipleSelect=this.isMultipleSelect,isCheckbox=this.isCheckbox;null==localValue&&(isMultipleSelect||isCheckbox)&&this.setInitialValue([])},methods:{updateAntLocalValue:function updateAntLocalValue(source){source.target?this.updateLocalValue(source.target.value):this.updateLocalValue(source)}}},componentNormalizer=__webpack_require__(19),AntFormAdaptor=Object(componentNormalizer.a)(adaptors_AntFormAdaptorvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("a-form-item",{attrs:{size:_vm.size,required:_vm.isRequired,validateStatus:errors.length?"error":null,help:errors[0],extra:_vm.tip},scopedSlots:_vm._u([{key:"label",fn:function(){return[_c("span",[_vm._v(_vm._s(_vm.label))]),_vm._v(" "),_c("span",[_c("a-tooltip",{attrs:{title:_vm.tooltip,placement:"top"}},[_c("a-icon",{attrs:{type:"question-circle"}})],1)],1)]},proxy:!0}],null,!0)},[_vm._v(" "),_vm.isSelect?_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{change:_vm.updateAntLocalValue}},"component",_vm.props,!1),_vm._l(_vm.items,(function(item){return _c("a-select-option",{key:item.value,attrs:{value:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1):_vm.isRadio?_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{change:_vm.updateAntLocalValue}},"component",_vm.props,!1),_vm._l(_vm.items,(function(item){return _c("a-radio",{key:item.value,attrs:{value:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1):_vm.isCheckbox?_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{change:_vm.updateAntLocalValue}},"component",_vm.props,!1),_vm._l(_vm.items,(function(item){return _c("a-checkbox",{key:item.value,attrs:{value:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1):_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{change:_vm.updateAntLocalValue}},"component",_vm.props,!1))],1)]}}])})}),[],!1,null,null,null).exports,starts_with=(__webpack_require__(117),__webpack_require__(185)),starts_with_default=__webpack_require__.n(starts_with),components_ExampleChannelvue_type_script_lang_js_={name:"example-channel",props:{name:String,tip:{type:String,default:"支持中文名、拼音首字母检索"},tooltip:String,hide:Boolean,rules:{type:[String,Object]},value:{required:!1},extend:Object,metadata:Object,formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{filteredChannels:[]}},computed:{channels:function channels(){return this.metadata.channels||[]},showChannels:function showChannels(){var channels=this.channels,filteredChannels=this.filteredChannels;return filteredChannels.length?filteredChannels:channels}},methods:{filterChannel:function filterChannel(word){var _context,like=function(str){return starts_with_default()(str).call(str,word)};word?this.filteredChannels=filter_default()(_context=this.channels).call(_context,(function(ch){return like(ch.name)||like(ch.code)})):this.filteredChannels=this.channels}}},ExampleChannel=Object(componentNormalizer.a)(components_ExampleChannelvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("a-form-item",{attrs:{label:"频道",size:"default",required:_vm.isRequired,validateStatus:errors.length?"error":null,help:errors[0],extra:_vm.tip}},[_c("a-select",{attrs:{allowClear:"","show-search":"","option-filter-prop":"children",value:_vm.localValue,placeholder:"请输入关键词进行搜索"},on:{change:_vm.updateLocalValue}},_vm._l(_vm.showChannels,(function(ch){return _c("a-select-option",{key:ch.id,attrs:{value:ch.id,label:ch.name}},[_c("span",[_vm._v(_vm._s(ch.name)+" - "+_vm._s(ch.id))])])})),1)],1)]}}])})}),[],!1,null,"da9cac06",null).exports,components_ExampleNamevue_type_script_lang_js_={name:"example-name",props:{name:String,tip:String,tooltip:String,hide:Boolean,rules:{type:[String,Object]},extend:Object,metadata:Object,value:{required:!1},formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{}},methods:{doSomething:function doSomething(){this.$emit("command","doSomething",{id:123456})}}},ExampleName=(__webpack_require__(1307),Object(componentNormalizer.a)(components_ExampleNamevue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("a-form-item",{attrs:{label:"标题",size:"default",required:_vm.isRequired,validateStatus:errors.length?"error":null,help:errors[0],extra:_vm.tip}},[_c("a-input",{attrs:{allowClear:"",value:_vm.localValue,type:"text",placeholder:"标题"},on:{change:function(e){return _vm.updateLocalValue(e.target.value)}},scopedSlots:_vm._u([{key:"addonAfter",fn:function(){return[_c("span",{staticClass:"input-addon-after",attrs:{icon:"phone"},on:{click:_vm.doSomething}},[_c("a-icon",{attrs:{type:"phone"}}),_vm._v(" 触发表单事件\n        ")],1)]},proxy:!0}],null,!0)})],1)]}}])})}),[],!1,null,"c7909662",null).exports),components_ExampleTypevue_type_script_lang_js_={name:"example-type",props:{name:String,tip:String,tooltip:String,hide:Boolean,rules:{type:[String,Object]},value:{required:!1},defaultValue:{required:!1},items:{type:Array,default:function _default(){return[{value:1,text:"正片"},{value:2,text:"花絮"}]}},extend:Object,metadata:Object,formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{}},created:function created(){this.localValue||this.setInitialValue(this.defaultValue)}},ExampleType=Object(componentNormalizer.a)(components_ExampleTypevue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("a-form-item",{attrs:{label:"节目类型",size:"default",required:_vm.isRequired,validateStatus:errors.length?"error":null,help:errors[0],extra:_vm.tip}},[_c("a-radio-group",{attrs:{value:_vm.localValue},on:{input:_vm.updateLocalValue}},_vm._l(_vm.items,(function(item){return _c("a-radio",{key:item.value,attrs:{value:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1)],1)]}}])})}),[],!1,null,"17e9c3fc",null).exports,slicedToArray=__webpack_require__(186),slicedToArray_default=__webpack_require__.n(slicedToArray),components_ExampleActorComplexvue_type_script_lang_js_={name:"example-actor-complex",props:{name:String,tip:{type:String,default:"必须同时填写导演、主演才有效"},tooltip:String,hide:Boolean,rules:{type:[String,Object]},value:{required:!1},extend:Object,metadata:Object,formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,watchPropValue:_useFormElement.watchPropValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{actor:{director:"",protagonist:""}}},watch:{actor:{handler:function handler(){this.updateLocalValue(this.getActorValue())},deep:!0}},created:function created(){var _this=this;this.setActorValue(this.value),this.watchPropValue((function(value){_this.setActorValue(value)}))},methods:{getActorValue:function getActorValue(){var _this$actor=this.actor,director=_this$actor.director,protagonist=_this$actor.protagonist;return director&&protagonist?[director,protagonist]:[]},setActorValue:function setActorValue(){var value=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],_value=slicedToArray_default()(value,2),_value$=_value[0],director=void 0===_value$?"":_value$,_value$2=_value[1],protagonist=void 0===_value$2?"":_value$2;this.actor={director:director,protagonist:protagonist}}}},components={ExampleChannel:ExampleChannel,ExampleName:ExampleName,ExampleType:ExampleType,ExampleActorComplex:Object(componentNormalizer.a)(components_ExampleActorComplexvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("a-form-item",{attrs:{label:"人物",size:"default",required:_vm.isRequired,validateStatus:errors.length?"error":null,help:errors[0]}},[_c("a-input",{attrs:{allowClear:"",type:"text",placeholder:"请填写导演姓名"},model:{value:_vm.actor.director,callback:function($$v){_vm.$set(_vm.actor,"director",$$v)},expression:"actor.director"}},[_c("template",{slot:"addonBefore"},[_vm._v("导演")])],2)],1)]}}])}),_vm._v(" "),_c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("a-form-item",{attrs:{size:"default",label:" ",validateStatus:errors.length?"error":null,help:errors[0],extra:_vm.tip}},[_c("a-input",{attrs:{allowClear:"",type:"text",placeholder:"请填写主演姓名"},model:{value:_vm.actor.protagonist,callback:function($$v){_vm.$set(_vm.actor,"protagonist",$$v)},expression:"actor.protagonist"}},[_c("template",{slot:"addonBefore"},[_vm._v("主演")])],2)],1)]}}])})],1)}),[],!1,null,"377e572a",null).exports};__webpack_require__(1358),__webpack_require__(1360);function ownKeys(object,enumerableOnly){var keys=keys_default()(object);if(get_own_property_symbols_default.a){var symbols=get_own_property_symbols_default()(object);enumerableOnly&&(symbols=filter_default()(symbols).call(symbols,(function(sym){return get_own_property_descriptor_default()(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++){var _context6;if(source=null!=arguments[i]?arguments[i]:{},i%2)for_each_default()(_context6=ownKeys(Object(source),!0)).call(_context6,(function(key){defineProperty_default()(target,key,source[key])}));else if(get_own_property_descriptors_default.a)define_properties_default()(target,get_own_property_descriptors_default()(source));else{var _context7;for_each_default()(_context7=ownKeys(Object(source))).call(_context7,(function(key){define_property_default()(target,key,get_own_property_descriptor_default()(source,key))}))}}return target}__webpack_require__(179).withSource;var addSourceDecorator=__webpack_require__(179).addSource;vue_esm.default.use(vue_composition_api_module.b),vue_esm.default.use(es.a),Object(vee_validate_full.localize)({zh:{name:"zh",messages:{max:"该字段最大长度为 {length} 个字符",min:"该字段最小长度为 {length} 个字符",required:"该字段不能为空"}}}),Object(vee_validate_full.localize)("zh"),vue_esm.default.component("ValidationProvider",vee_validate_full.ValidationProvider),vue_esm.default.component("ValidationObserver",vee_validate_full.ValidationObserver);var BasicUsage=addSourceDecorator((function(){return{template:'\n    <div class="form-builder-example">\n      <validation-observer ref="observer" v-slot="{ invalid }">\n        <a-row :gutter="10">\n          <a-col :span="12">\n          <a-spin :spinning="loading">\n            <a-form\n              :colon="false"\n              :label-col="{ span: 4 }"\n              :wrapper-col="{ span: 16 }"\n            >\n              <a-card v-if="!formConfig.length">\n                <div class="placeholder"></div>\n              </a-card>\n              <form-builder\n                @command="handleCommand"\n                :form="form"\n                :shares="formShares"\n                :config="formConfig"\n                :metadata="metadata"\n              ></form-builder>\n\n              <div class="form-action">\n                <a-button :disabled="loading" type="primary" @click="save">\n                  提交\n                </a-button>\n              </div>\n            </a-form>\n          </a-spin>\n          </a-col>\n          <a-col :span="12">\n            <a-card title="表单配置">\n              <a-textarea v-model="formConfigJSON" :rows="45" />\n            </a-card>\n          </a-col>\n        </a-row>\n      </validation-observer>\n      <a-modal title="提交结果" v-model="showResultModal" width="80%">\n        <pre>{{ JSON.stringify(formValues, null, 4) }}</pre>\n        <span slot="footer">\n          <a-button type="primary" @click="showResultModal = false">确 定</a-button>\n        </span>\n      </a-modal>\n    </div>\n  ',components:{FormBuilder:Object(src.a)({components:_objectSpread({AntFormAdaptor:AntFormAdaptor},components)})},setup:function setup(){var form=Object(index_esm.a)(),formValues=form.formValues,setInitialFormValues=form.setInitialFormValues,updateFormValues=form.updateFormValues,_useLoading=Object(index_esm.c)();return{form:form,formValues:formValues,setInitialFormValues:setInitialFormValues,updateFormValues:updateFormValues,loading:_useLoading.loading,withLoading:_useLoading.withLoading}},data:function data(){return{showResultModal:!1,metadata:{},formShares:{size:"default",props:{allowClear:!0}},formConfig:[],formConfigJSON:stringify_default()([{component:"a-card",props:{title:"基础信息"},fields:[{name:"channel",component:"ExampleChannel",rules:{required:!0}},{name:"name",component:"ExampleName",rules:{required:!0}},{name:"comment",component:"AntFormAdaptor",label:"评语",tip:"一句话评价（使用 FormAdaptor 的自定义字段）",tooltip:"精彩点评",rules:{required:!0,max:50,min:10},props:{placeholder:"不超过 20 个字"}}]},{component:"a-card",props:{title:"高级信息"},fields:[{name:"type",component:"ExampleType",defaultValue:2},{name:"actor",component:"ExampleActorComplex"},{name:"date",component:"AntFormAdaptor",label:"发行日期",extend:{component:"a-date-picker"},props:{placeholder:"请通过日期选择器"}},{name:"description",component:"AntFormAdaptor",label:"描述",tip:"剧情描述（使用 FormAdaptor 的自定义字段）",rules:{max:180},props:{type:"textarea",rows:5,placeholder:"不超过 180 个字"}}]}],null,2)}},watch:{formConfigJSON:{handler:function handler(){try{this.formConfig=JSON.parse(this.formConfigJSON)}catch(err){}},immediate:!0}},created:function created(){this.registerEvents(),this.renderForm()},methods:{delay:function delay(){var timeout=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;return new promise_default.a((function(resolve){set_timeout_default()((function(){resolve()}),timeout)}))},getInitialValues:function getInitialValues(){return{}},registerEvents:function registerEvents(){var _this=this;this.$on("doSomething",(function(){_this.$message({type:"success",message:"触发表单事件成功！"})}))},handleCommand:function handleCommand(cmd){for(var _context,_len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];this.$emit.apply(this,concat_default()(_context=[cmd]).call(_context,args))},renderForm:function renderForm(){var _this2=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",_this2.withLoading((function(){return promise_default.a.all([_this2.getRenderMetadata(),_this2.getFormValues()])})));case 1:case"end":return _context2.stop()}}),_callee)})))()},getRenderMetadata:function getRenderMetadata(){var _this3=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(){return regenerator_default.a.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this3.delay();case 2:return _context3.abrupt("return",promise_default.a.resolve({channels:[{id:1,code:"dy",name:"电影"},{id:2,code:"dm",name:"动漫"}]}).then((function(data){_this3.metadata=data})));case 3:case"end":return _context3.stop()}}),_callee2)})))()},getFormValues:function getFormValues(){var _this4=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee3(){return regenerator_default.a.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_this4.delay();case 2:return _context4.abrupt("return",promise_default.a.resolve({channel:2,name:"Form Builder",comment:"A powerful form builder",actor:["Yang","Zhang"],description:"What a nice tool"}).then((function(data){var formValues=_this4.formValues;_this4.updateFormValues(_objectSpread(_objectSpread({},formValues),data))})));case 3:case"end":return _context4.stop()}}),_callee3)})))()},save:function save(){var _this5=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee4(){return regenerator_default.a.wrap((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_this5.$refs.observer.validate();case 2:if(_context5.sent){_context5.next=6;break}return _this5.$message({type:"error",message:"部分表单填写错误，请检查！"}),_context5.abrupt("return");case 6:_this5.showResultModal=!0;case 7:case"end":return _context5.stop()}}),_callee4)})))()}}}}),{__STORY__:"import Vue from 'vue';\nimport VueCompositionApi from '@vue/composition-api';\nimport { useForm, useLoading } from '@fext/vue-use';\nimport Antd from 'ant-design-vue';\nimport {\n  ValidationProvider,\n  ValidationObserver,\n  localize\n} from 'vee-validate/dist/vee-validate.full';\n\nimport markdown from './FormBuilder.md';\nimport { createFormBuilder } from '@/src';\nimport { AntFormAdaptor } from '@/src/ant-form-adaptor';\nimport ExampleComponents from './components';\n\nimport 'ant-design-vue/dist/antd.css';\nimport './style.scss';\n\nVue.use(VueCompositionApi);\nVue.use(Antd);\n\nlocalize({\n  zh: {\n    name: 'zh',\n    messages: {\n      max: '该字段最大长度为 {length} 个字符',\n      min: '该字段最小长度为 {length} 个字符',\n      required: '该字段不能为空'\n    }\n  }\n});\n\nlocalize('zh');\n\nVue.component('ValidationProvider', ValidationProvider);\nVue.component('ValidationObserver', ValidationObserver);\n\n// =============== Start of Basic Usage =============== //\n\nexport const BasicUsage = () => ({\n  template: `\n    <div class=\"form-builder-example\">\n      <validation-observer ref=\"observer\" v-slot=\"{ invalid }\">\n        <a-row :gutter=\"10\">\n          <a-col :span=\"12\">\n          <a-spin :spinning=\"loading\">\n            <a-form\n              :colon=\"false\"\n              :label-col=\"{ span: 4 }\"\n              :wrapper-col=\"{ span: 16 }\"\n            >\n              <a-card v-if=\"!formConfig.length\">\n                <div class=\"placeholder\"></div>\n              </a-card>\n              <form-builder\n                @command=\"handleCommand\"\n                :form=\"form\"\n                :shares=\"formShares\"\n                :config=\"formConfig\"\n                :metadata=\"metadata\"\n              ></form-builder>\n\n              <div class=\"form-action\">\n                <a-button :disabled=\"loading\" type=\"primary\" @click=\"save\">\n                  提交\n                </a-button>\n              </div>\n            </a-form>\n          </a-spin>\n          </a-col>\n          <a-col :span=\"12\">\n            <a-card title=\"表单配置\">\n              <a-textarea v-model=\"formConfigJSON\" :rows=\"45\" />\n            </a-card>\n          </a-col>\n        </a-row>\n      </validation-observer>\n      <a-modal title=\"提交结果\" v-model=\"showResultModal\" width=\"80%\">\n        <pre>{{ JSON.stringify(formValues, null, 4) }}</pre>\n        <span slot=\"footer\">\n          <a-button type=\"primary\" @click=\"showResultModal = false\">确 定</a-button>\n        </span>\n      </a-modal>\n    </div>\n  `,\n\n  components: {\n    FormBuilder: createFormBuilder({\n      components: {\n        AntFormAdaptor,\n\n        ...ExampleComponents\n      }\n    })\n  },\n\n  setup() {\n    const form = useForm();\n    const { formValues, setInitialFormValues, updateFormValues } = form;\n    const { loading, withLoading } = useLoading();\n\n    return {\n      // from form composition\n      form,\n      formValues,\n      setInitialFormValues,\n      updateFormValues,\n\n      // from loading composition\n      loading,\n      withLoading\n    };\n  },\n\n  data() {\n    return {\n      showResultModal: false,\n\n      metadata: {},\n\n      formShares: {\n        size: 'default',\n\n        props: {\n          allowClear: true\n        }\n      },\n\n      formConfig: [],\n\n      formConfigJSON: JSON.stringify(\n        [\n          {\n            component: 'a-card',\n            props: {\n              title: '基础信息'\n            },\n            fields: [\n              {\n                name: 'channel',\n                component: 'ExampleChannel',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'name',\n                component: 'ExampleName',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'comment',\n                component: 'AntFormAdaptor',\n                label: '评语',\n                tip: '一句话评价（使用 FormAdaptor 的自定义字段）',\n                tooltip: '精彩点评',\n                rules: {\n                  required: true,\n                  max: 50,\n                  min: 10\n                },\n                props: {\n                  placeholder: '不超过 20 个字'\n                }\n              }\n            ]\n          },\n          {\n            component: 'a-card',\n            props: {\n              title: '高级信息'\n            },\n            fields: [\n              {\n                name: 'type',\n                component: 'ExampleType',\n                defaultValue: 2\n              },\n              {\n                name: 'actor',\n                component: 'ExampleActorComplex'\n              },\n              {\n                name: 'date',\n                component: 'AntFormAdaptor',\n                label: '发行日期',\n                extend: {\n                  component: 'a-date-picker'\n                },\n                props: {\n                  placeholder: '请通过日期选择器'\n                }\n              },\n              {\n                name: 'description',\n                component: 'AntFormAdaptor',\n                label: '描述',\n                tip: '剧情描述（使用 FormAdaptor 的自定义字段）',\n                rules: {\n                  max: 180\n                },\n                props: {\n                  type: 'textarea',\n                  rows: 5,\n                  placeholder: '不超过 180 个字'\n                }\n              }\n            ]\n          }\n        ],\n        null,\n        2\n      )\n    };\n  },\n\n  watch: {\n    formConfigJSON: {\n      handler(value) {\n        try {\n          this.formConfig = JSON.parse(this.formConfigJSON);\n        } catch (err) {\n          // this.formConfig = this.formConfig;\n        }\n      },\n      immediate: true\n    }\n  },\n\n  created() {\n    this.registerEvents();\n    this.renderForm();\n  },\n\n  methods: {\n    delay(timeout = 1000) {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n        }, timeout);\n      });\n    },\n\n    getInitialValues() {\n      return {};\n    },\n\n    registerEvents() {\n      this.$on('doSomething', options => {\n        this.$message({\n          type: 'success',\n          message: '触发表单事件成功！'\n        });\n      });\n    },\n\n    handleCommand(cmd, ...args) {\n      this.$emit(cmd, ...args);\n    },\n\n    async renderForm() {\n      return this.withLoading(() => {\n        return Promise.all([this.getRenderMetadata(), this.getFormValues()]);\n      });\n    },\n\n    async getRenderMetadata() {\n      await this.delay();\n\n      return Promise.resolve({\n        channels: [\n          {\n            id: 1,\n            code: 'dy',\n            name: '电影'\n          },\n          {\n            id: 2,\n            code: 'dm',\n            name: '动漫'\n          }\n        ]\n      }).then(data => {\n        this.metadata = data;\n      });\n    },\n\n    async getFormValues() {\n      await this.delay();\n\n      return Promise.resolve({\n        channel: 2,\n        name: 'Form Builder',\n        comment: 'A powerful form builder',\n        actor: ['Yang', 'Zhang'],\n        description: 'What a nice tool'\n      }).then(data => {\n        const { formValues } = this;\n\n        this.updateFormValues({\n          ...formValues,\n          ...data\n        });\n      });\n    },\n\n    async save() {\n      const valid = await this.$refs.observer.validate();\n\n      if (!valid) {\n        this.$message({\n          type: 'error',\n          message: '部分表单填写错误，请检查！'\n        });\n        return;\n      }\n\n      this.showResultModal = true;\n    }\n  }\n});\n\nBasicUsage.story = {\n  name: 'Basic Usage'\n};\n\n// =============== End of Basic Usage =============== //\n\nexport default {\n  title: 'FormBuilder|Ant Design Vue',\n  parameters: {\n    notes: {\n      markdown\n    }\n  }\n};\n",__ADDS_MAP__:{"formbuilder-ant-design-vue--basic-usage":{startLoc:{col:26,line:40},endLoc:{col:2,line:323},startBody:{col:26,line:40},endBody:{col:2,line:323}}},__MAIN_FILE_LOCATION__:"/FormBuilder.stories.js",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/runner/work/vue-form-builder/vue-form-builder/stories/antd",__IDS_TO_FRAMEWORKS__:{}});BasicUsage.story={name:"Basic Usage"};__webpack_exports__.default={title:"FormBuilder|Ant Design Vue",parameters:{storySource:{source:"import Vue from 'vue';\nimport VueCompositionApi from '@vue/composition-api';\nimport { useForm, useLoading } from '@fext/vue-use';\nimport Antd from 'ant-design-vue';\nimport {\n  ValidationProvider,\n  ValidationObserver,\n  localize\n} from 'vee-validate/dist/vee-validate.full';\n\nimport markdown from './FormBuilder.md';\nimport { createFormBuilder } from '@/src';\nimport { AntFormAdaptor } from '@/src/ant-form-adaptor';\nimport ExampleComponents from './components';\n\nimport 'ant-design-vue/dist/antd.css';\nimport './style.scss';\n\nVue.use(VueCompositionApi);\nVue.use(Antd);\n\nlocalize({\n  zh: {\n    name: 'zh',\n    messages: {\n      max: '该字段最大长度为 {length} 个字符',\n      min: '该字段最小长度为 {length} 个字符',\n      required: '该字段不能为空'\n    }\n  }\n});\n\nlocalize('zh');\n\nVue.component('ValidationProvider', ValidationProvider);\nVue.component('ValidationObserver', ValidationObserver);\n\n// =============== Start of Basic Usage =============== //\n\nexport const BasicUsage = () => ({\n  template: `\n    <div class=\"form-builder-example\">\n      <validation-observer ref=\"observer\" v-slot=\"{ invalid }\">\n        <a-row :gutter=\"10\">\n          <a-col :span=\"12\">\n          <a-spin :spinning=\"loading\">\n            <a-form\n              :colon=\"false\"\n              :label-col=\"{ span: 4 }\"\n              :wrapper-col=\"{ span: 16 }\"\n            >\n              <a-card v-if=\"!formConfig.length\">\n                <div class=\"placeholder\"></div>\n              </a-card>\n              <form-builder\n                @command=\"handleCommand\"\n                :form=\"form\"\n                :shares=\"formShares\"\n                :config=\"formConfig\"\n                :metadata=\"metadata\"\n              ></form-builder>\n\n              <div class=\"form-action\">\n                <a-button :disabled=\"loading\" type=\"primary\" @click=\"save\">\n                  提交\n                </a-button>\n              </div>\n            </a-form>\n          </a-spin>\n          </a-col>\n          <a-col :span=\"12\">\n            <a-card title=\"表单配置\">\n              <a-textarea v-model=\"formConfigJSON\" :rows=\"45\" />\n            </a-card>\n          </a-col>\n        </a-row>\n      </validation-observer>\n      <a-modal title=\"提交结果\" v-model=\"showResultModal\" width=\"80%\">\n        <pre>{{ JSON.stringify(formValues, null, 4) }}</pre>\n        <span slot=\"footer\">\n          <a-button type=\"primary\" @click=\"showResultModal = false\">确 定</a-button>\n        </span>\n      </a-modal>\n    </div>\n  `,\n\n  components: {\n    FormBuilder: createFormBuilder({\n      components: {\n        AntFormAdaptor,\n\n        ...ExampleComponents\n      }\n    })\n  },\n\n  setup() {\n    const form = useForm();\n    const { formValues, setInitialFormValues, updateFormValues } = form;\n    const { loading, withLoading } = useLoading();\n\n    return {\n      // from form composition\n      form,\n      formValues,\n      setInitialFormValues,\n      updateFormValues,\n\n      // from loading composition\n      loading,\n      withLoading\n    };\n  },\n\n  data() {\n    return {\n      showResultModal: false,\n\n      metadata: {},\n\n      formShares: {\n        size: 'default',\n\n        props: {\n          allowClear: true\n        }\n      },\n\n      formConfig: [],\n\n      formConfigJSON: JSON.stringify(\n        [\n          {\n            component: 'a-card',\n            props: {\n              title: '基础信息'\n            },\n            fields: [\n              {\n                name: 'channel',\n                component: 'ExampleChannel',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'name',\n                component: 'ExampleName',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'comment',\n                component: 'AntFormAdaptor',\n                label: '评语',\n                tip: '一句话评价（使用 FormAdaptor 的自定义字段）',\n                tooltip: '精彩点评',\n                rules: {\n                  required: true,\n                  max: 50,\n                  min: 10\n                },\n                props: {\n                  placeholder: '不超过 20 个字'\n                }\n              }\n            ]\n          },\n          {\n            component: 'a-card',\n            props: {\n              title: '高级信息'\n            },\n            fields: [\n              {\n                name: 'type',\n                component: 'ExampleType',\n                defaultValue: 2\n              },\n              {\n                name: 'actor',\n                component: 'ExampleActorComplex'\n              },\n              {\n                name: 'date',\n                component: 'AntFormAdaptor',\n                label: '发行日期',\n                extend: {\n                  component: 'a-date-picker'\n                },\n                props: {\n                  placeholder: '请通过日期选择器'\n                }\n              },\n              {\n                name: 'description',\n                component: 'AntFormAdaptor',\n                label: '描述',\n                tip: '剧情描述（使用 FormAdaptor 的自定义字段）',\n                rules: {\n                  max: 180\n                },\n                props: {\n                  type: 'textarea',\n                  rows: 5,\n                  placeholder: '不超过 180 个字'\n                }\n              }\n            ]\n          }\n        ],\n        null,\n        2\n      )\n    };\n  },\n\n  watch: {\n    formConfigJSON: {\n      handler(value) {\n        try {\n          this.formConfig = JSON.parse(this.formConfigJSON);\n        } catch (err) {\n          // this.formConfig = this.formConfig;\n        }\n      },\n      immediate: true\n    }\n  },\n\n  created() {\n    this.registerEvents();\n    this.renderForm();\n  },\n\n  methods: {\n    delay(timeout = 1000) {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n        }, timeout);\n      });\n    },\n\n    getInitialValues() {\n      return {};\n    },\n\n    registerEvents() {\n      this.$on('doSomething', options => {\n        this.$message({\n          type: 'success',\n          message: '触发表单事件成功！'\n        });\n      });\n    },\n\n    handleCommand(cmd, ...args) {\n      this.$emit(cmd, ...args);\n    },\n\n    async renderForm() {\n      return this.withLoading(() => {\n        return Promise.all([this.getRenderMetadata(), this.getFormValues()]);\n      });\n    },\n\n    async getRenderMetadata() {\n      await this.delay();\n\n      return Promise.resolve({\n        channels: [\n          {\n            id: 1,\n            code: 'dy',\n            name: '电影'\n          },\n          {\n            id: 2,\n            code: 'dm',\n            name: '动漫'\n          }\n        ]\n      }).then(data => {\n        this.metadata = data;\n      });\n    },\n\n    async getFormValues() {\n      await this.delay();\n\n      return Promise.resolve({\n        channel: 2,\n        name: 'Form Builder',\n        comment: 'A powerful form builder',\n        actor: ['Yang', 'Zhang'],\n        description: 'What a nice tool'\n      }).then(data => {\n        const { formValues } = this;\n\n        this.updateFormValues({\n          ...formValues,\n          ...data\n        });\n      });\n    },\n\n    async save() {\n      const valid = await this.$refs.observer.validate();\n\n      if (!valid) {\n        this.$message({\n          type: 'error',\n          message: '部分表单填写错误，请检查！'\n        });\n        return;\n      }\n\n      this.showResultModal = true;\n    }\n  }\n});\n\nBasicUsage.story = {\n  name: 'Basic Usage'\n};\n\n// =============== End of Basic Usage =============== //\n\nexport default {\n  title: 'FormBuilder|Ant Design Vue',\n  parameters: {\n    notes: {\n      markdown\n    }\n  }\n};\n",locationsMap:{"formbuilder-ant-design-vue--basic-usage":{startLoc:{col:26,line:40},endLoc:{col:2,line:323},startBody:{col:26,line:40},endBody:{col:2,line:323}}}},notes:{markdown:"# Ant Design Form Builder\n\nVue form builder with ant design vue.\n"}}}},1484:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"BasicUsage",(function(){return BasicUsage}));__webpack_require__(53),__webpack_require__(51),__webpack_require__(166),__webpack_require__(60),__webpack_require__(61);var define_property=__webpack_require__(101),define_property_default=__webpack_require__.n(define_property),define_properties=__webpack_require__(102),define_properties_default=__webpack_require__.n(define_properties),get_own_property_descriptors=__webpack_require__(54),get_own_property_descriptors_default=__webpack_require__.n(get_own_property_descriptors),for_each=__webpack_require__(40),for_each_default=__webpack_require__.n(for_each),get_own_property_descriptor=__webpack_require__(55),get_own_property_descriptor_default=__webpack_require__.n(get_own_property_descriptor),filter=__webpack_require__(48),filter_default=__webpack_require__.n(filter),get_own_property_symbols=__webpack_require__(56),get_own_property_symbols_default=__webpack_require__.n(get_own_property_symbols),object_keys=__webpack_require__(103),keys_default=__webpack_require__.n(object_keys),regenerator=__webpack_require__(26),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(157),__webpack_require__(57)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),concat=__webpack_require__(104),concat_default=__webpack_require__.n(concat),set_timeout=__webpack_require__(184),set_timeout_default=__webpack_require__.n(set_timeout),promise=__webpack_require__(49),promise_default=__webpack_require__.n(promise),stringify=__webpack_require__(135),stringify_default=__webpack_require__.n(stringify),defineProperty=__webpack_require__(74),defineProperty_default=__webpack_require__.n(defineProperty),vue_esm=__webpack_require__(12),vue_composition_api_module=__webpack_require__(25),index_esm=__webpack_require__(16),element_ui_common=__webpack_require__(795),element_ui_common_default=__webpack_require__.n(element_ui_common),vee_validate_full=__webpack_require__(58),src=__webpack_require__(190),adaptors_ElementFormAdaptorvue_type_script_lang_js_={name:"el-form-adaptor",props:{tip:String,tooltip:String,name:String,size:{type:String,default:"medium"},label:String,rules:{type:[String,Object]},value:{required:!1},props:{type:Object,default:function _default(){return{}},required:!1},items:{type:Array,default:function _default(){return[]},required:!1},extend:{type:Object,default:function _default(){return{}}},metadata:{type:Object,default:function _default(){return{}}},formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{}},computed:{component:function component(){return this.extend.component||"el-input"},isSelect:function isSelect(){return"el-select"===this.component},isMultipleSelect:function isMultipleSelect(){return this.isSelect&&this.props.multiple},isRadio:function isRadio(){return"el-radio-group"===this.component},isCheckbox:function isCheckbox(){return"el-checkbox-group"===this.component}},created:function created(){var localValue=this.localValue,isMultipleSelect=this.isMultipleSelect,isCheckbox=this.isCheckbox;null==localValue&&(isMultipleSelect||isCheckbox)&&this.setInitialValue([])}},componentNormalizer=(__webpack_require__(1465),__webpack_require__(19)),ElementFormAdaptor=Object(componentNormalizer.a)(adaptors_ElementFormAdaptorvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("el-form-item",{attrs:{size:_vm.size,required:_vm.isRequired,error:errors[0]},scopedSlots:_vm._u([{key:"label",fn:function(){return[_c("span",[_vm._v(_vm._s(_vm.label))]),_vm._v(" "),_vm.tooltip?_c("span",[_c("el-tooltip",{attrs:{content:_vm.tooltip,placement:"top"}},[_c("i",{staticClass:"el-icon-question"})])],1):_vm._e()]},proxy:!0}],null,!0)},[_vm._v(" "),_vm.isSelect?_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{input:_vm.updateLocalValue}},"component",_vm.props,!1),_vm._l(_vm.items,(function(item){return _c("el-option",{key:item.value,attrs:{value:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1):_vm.isRadio?_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{input:_vm.updateLocalValue}},"component",_vm.props,!1),_vm._l(_vm.items,(function(item){return _c("el-radio",{key:item.value,attrs:{label:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1):_vm.isCheckbox?_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{input:_vm.updateLocalValue}},"component",_vm.props,!1),_vm._l(_vm.items,(function(item){return _c("el-checkbox",{key:item.value,attrs:{label:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1):_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{input:_vm.updateLocalValue}},"component",_vm.props,!1)),_vm._v(" "),_vm.tip?_c("div",{staticClass:"el-form-item__tip"},[_vm._v(_vm._s(_vm.tip))]):_vm._e()],1)]}}])})}),[],!1,null,null,null).exports,starts_with=(__webpack_require__(117),__webpack_require__(185)),starts_with_default=__webpack_require__.n(starts_with),components_ExampleChannelvue_type_script_lang_js_={name:"example-channel",props:{name:String,tip:{type:String,default:"支持中文名、拼音首字母检索"},tooltip:String,hide:Boolean,rules:{type:[String,Object]},value:{required:!1},extend:Object,metadata:Object,formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{filteredChannels:[]}},computed:{channels:function channels(){return this.metadata.channels||[]},showChannels:function showChannels(){var channels=this.channels,filteredChannels=this.filteredChannels;return filteredChannels.length?filteredChannels:channels}},methods:{filterChannel:function filterChannel(word){var _context,like=function(str){return starts_with_default()(str).call(str,word)};word?this.filteredChannels=filter_default()(_context=this.channels).call(_context,(function(ch){return like(ch.name)||like(ch.code)})):this.filteredChannels=this.channels}}},ExampleChannel=Object(componentNormalizer.a)(components_ExampleChannelvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("el-form-item",{attrs:{label:"频道",size:"medium",required:_vm.isRequired,error:errors[0]}},[_c("el-select",{attrs:{clearable:"",filterable:"","filter-method":_vm.filterChannel,value:_vm.localValue,placeholder:"请输入关键词进行搜索"},on:{input:_vm.updateLocalValue}},_vm._l(_vm.showChannels,(function(ch){return _c("el-option",{key:ch.id,attrs:{value:ch.id,label:ch.name}},[_c("span",[_vm._v(_vm._s(ch.name)+" - "+_vm._s(ch.id))])])})),1),_vm._v(" "),_vm.tip?_c("div",{staticClass:"el-form-item__tip"},[_vm._v(_vm._s(_vm.tip))]):_vm._e()],1)]}}])})}),[],!1,null,"71f26456",null).exports,components_ExampleNamevue_type_script_lang_js_={name:"example-name",props:{name:String,tip:String,tooltip:String,hide:Boolean,rules:{type:[String,Object]},extend:Object,metadata:Object,value:{required:!1},formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{}},methods:{doSomething:function doSomething(){this.$emit("command","doSomething",{id:123456})}}},ExampleName=Object(componentNormalizer.a)(components_ExampleNamevue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("el-form-item",{attrs:{label:"标题",size:"medium",required:_vm.isRequired,error:errors[0]}},[_c("el-input",{attrs:{clearable:"",value:_vm.localValue,type:"text",placeholder:"标题"},on:{input:_vm.updateLocalValue},scopedSlots:_vm._u([{key:"append",fn:function(){return[_c("el-tooltip",{attrs:{content:"通过事件触发整体表单操作",placement:"top"}},[_c("el-button",{attrs:{icon:"el-icon-phone-outline"},on:{click:_vm.doSomething}},[_vm._v("触发表单事件")])],1)]},proxy:!0}],null,!0)}),_vm._v(" "),_vm.tip?_c("div",{staticClass:"el-form-item__tip"},[_vm._v(_vm._s(_vm.tip))]):_vm._e()],1)]}}])})}),[],!1,null,"5e773132",null).exports,components_ExampleTypevue_type_script_lang_js_={name:"example-type",props:{name:String,tip:String,tooltip:String,hide:Boolean,rules:{type:[String,Object]},value:{required:!1},defaultValue:{required:!1},items:{type:Array,default:function _default(){return[{value:1,text:"正片"},{value:2,text:"花絮"}]}},extend:Object,metadata:Object,formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{}},created:function created(){this.localValue||this.setInitialValue(this.defaultValue)}},ExampleType=Object(componentNormalizer.a)(components_ExampleTypevue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("el-form-item",{attrs:{label:"节目类型",size:"medium",required:_vm.isRequired,error:errors[0]}},[_c("el-radio-group",{attrs:{value:_vm.localValue},on:{input:_vm.updateLocalValue}},_vm._l(_vm.items,(function(item){return _c("el-radio",{key:item.value,attrs:{label:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1),_vm._v(" "),_vm.tip?_c("div",{staticClass:"el-form-item__tip"},[_vm._v(_vm._s(_vm.tip))]):_vm._e()],1)]}}])})}),[],!1,null,"0ce9826b",null).exports,slicedToArray=__webpack_require__(186),slicedToArray_default=__webpack_require__.n(slicedToArray),components_ExampleActorComplexvue_type_script_lang_js_={name:"example-actor-complex",props:{name:String,tip:{type:String,default:"必须同时填写导演、主演才有效"},tooltip:String,hide:Boolean,rules:{type:[String,Object]},value:{required:!1},extend:Object,metadata:Object,formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,watchPropValue:_useFormElement.watchPropValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{actor:{director:"",protagonist:""}}},watch:{actor:{handler:function handler(){this.updateLocalValue(this.getActorValue())},deep:!0}},created:function created(){var _this=this;this.setActorValue(this.value),this.watchPropValue((function(value){_this.setActorValue(value)}))},methods:{getActorValue:function getActorValue(){var _this$actor=this.actor,director=_this$actor.director,protagonist=_this$actor.protagonist;return director&&protagonist?[director,protagonist]:[]},setActorValue:function setActorValue(){var value=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],_value=slicedToArray_default()(value,2),_value$=_value[0],director=void 0===_value$?"":_value$,_value$2=_value[1],protagonist=void 0===_value$2?"":_value$2;this.actor={director:director,protagonist:protagonist}}}},components={ExampleChannel:ExampleChannel,ExampleName:ExampleName,ExampleType:ExampleType,ExampleActorComplex:Object(componentNormalizer.a)(components_ExampleActorComplexvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("el-form-item",{attrs:{label:"人物",size:"medium",required:_vm.isRequired,error:errors[0]}},[_c("el-input",{attrs:{clearable:"",type:"text",placeholder:"请填写导演姓名"},model:{value:_vm.actor.director,callback:function($$v){_vm.$set(_vm.actor,"director",$$v)},expression:"actor.director"}},[_c("template",{slot:"prepend"},[_vm._v("导演")])],2)],1)]}}])}),_vm._v(" "),_c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("el-form-item",{attrs:{size:"medium",error:errors[0]}},[_c("el-input",{attrs:{clearable:"",type:"text",placeholder:"请填写主演姓名"},model:{value:_vm.actor.protagonist,callback:function($$v){_vm.$set(_vm.actor,"protagonist",$$v)},expression:"actor.protagonist"}},[_c("template",{slot:"prepend"},[_vm._v("主演")])],2),_vm._v(" "),_vm.tip?_c("div",{staticClass:"el-form-item__tip"},[_vm._v(_vm._s(_vm.tip))]):_vm._e()],1)]}}])})],1)}),[],!1,null,"4f1e7934",null).exports};__webpack_require__(1467),__webpack_require__(1471);function ownKeys(object,enumerableOnly){var keys=keys_default()(object);if(get_own_property_symbols_default.a){var symbols=get_own_property_symbols_default()(object);enumerableOnly&&(symbols=filter_default()(symbols).call(symbols,(function(sym){return get_own_property_descriptor_default()(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++){var _context6;if(source=null!=arguments[i]?arguments[i]:{},i%2)for_each_default()(_context6=ownKeys(Object(source),!0)).call(_context6,(function(key){defineProperty_default()(target,key,source[key])}));else if(get_own_property_descriptors_default.a)define_properties_default()(target,get_own_property_descriptors_default()(source));else{var _context7;for_each_default()(_context7=ownKeys(Object(source))).call(_context7,(function(key){define_property_default()(target,key,get_own_property_descriptor_default()(source,key))}))}}return target}__webpack_require__(179).withSource;var addSourceDecorator=__webpack_require__(179).addSource;vue_esm.default.use(vue_composition_api_module.b),vue_esm.default.use(element_ui_common_default.a),Object(vee_validate_full.localize)({zh:{name:"zh",messages:{max:"该字段最大长度为 {length} 个字符",min:"该字段最小长度为 {length} 个字符",required:"该字段不能为空"}}}),Object(vee_validate_full.localize)("zh"),vue_esm.default.component("ValidationProvider",vee_validate_full.ValidationProvider),vue_esm.default.component("ValidationObserver",vee_validate_full.ValidationObserver);var BasicUsage=addSourceDecorator((function(){return{template:'\n    <div class="form-builder-example">\n      <validation-observer ref="observer" v-slot="{ invalid }">\n        <el-row :gutter="10">\n          <el-col :span="12" :xs="24">\n            <el-form\n              label-width="80px"\n              v-loading="loading"\n            >\n              <el-card v-if="!formConfig.length">\n                <div class="placeholder"></div>\n              </el-card>\n              <form-builder\n                @command="handleCommand"\n                :form="form"\n                :shares="formShares"\n                :config="formConfig"\n                :metadata="metadata"\n              ></form-builder>\n\n              <div class="form-action">\n                <el-button :disabled="loading" type="primary" @click="save">\n                  提交\n                </el-button>\n              </div>\n            </el-form>\n          </el-col>\n          <el-col :span="12" :xs="24">\n            <el-card header="表单配置">\n              <el-input type="textarea" v-model="formConfigJSON" rows="45" />\n            </el-card>\n          </el-col>\n        </el-row>\n      </validation-observer>\n      <el-dialog title="提交结果" :visible.sync="showResultModal" width="80%">\n        <pre>{{ JSON.stringify(formValues, null, 4) }}</pre>\n        <span slot="footer">\n          <el-button type="primary" @click="showResultModal = false">确 定</el-button>\n        </span>\n      </el-dialog>\n    </div>\n  ',components:{FormBuilder:Object(src.a)({components:_objectSpread({ElFormAdaptor:ElementFormAdaptor},components)})},setup:function setup(){var form=Object(index_esm.a)(),formValues=form.formValues,setInitialFormValues=form.setInitialFormValues,updateFormValues=form.updateFormValues,_useLoading=Object(index_esm.c)();return{form:form,formValues:formValues,setInitialFormValues:setInitialFormValues,updateFormValues:updateFormValues,loading:_useLoading.loading,withLoading:_useLoading.withLoading}},data:function data(){return{showResultModal:!1,metadata:{},formShares:{size:"medium",props:{clearable:!0}},formConfig:[],formConfigJSON:stringify_default()([{component:"el-card",props:{header:"基础信息"},fields:[{name:"channel",component:"ExampleChannel",rules:{required:!0}},{name:"name",component:"ExampleName",rules:{required:!0}},{name:"comment",component:"ElFormAdaptor",label:"评语",tip:"一句话评价（使用 FormAdaptor 的自定义字段）",tooltip:"精彩点评",rules:{required:!0,max:50,min:10},props:{placeholder:"不超过 20 个字"}}]},{component:"el-card",props:{header:"高级信息"},fields:[{name:"type",component:"ExampleType",defaultValue:2},{name:"actor",component:"ExampleActorComplex"},{name:"date",component:"ElFormAdaptor",label:"发行日期",extend:{component:"el-date-picker"},props:{placeholder:"请通过日期选择器"}},{name:"description",component:"ElFormAdaptor",label:"描述",tip:"剧情描述（使用 FormAdaptor 的自定义字段）",rules:{max:180},props:{type:"textarea",rows:5,placeholder:"不超过 180 个字"}}]}],null,2)}},watch:{formConfigJSON:{handler:function handler(){try{this.formConfig=JSON.parse(this.formConfigJSON)}catch(err){}},immediate:!0}},created:function created(){this.registerEvents(),this.renderForm()},methods:{delay:function delay(){var timeout=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;return new promise_default.a((function(resolve){set_timeout_default()((function(){resolve()}),timeout)}))},getInitialValues:function getInitialValues(){return{}},registerEvents:function registerEvents(){var _this=this;this.$on("doSomething",(function(){_this.$message({type:"success",message:"触发表单事件成功！"})}))},handleCommand:function handleCommand(cmd){for(var _context,_len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];this.$emit.apply(this,concat_default()(_context=[cmd]).call(_context,args))},renderForm:function renderForm(){var _this2=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",_this2.withLoading((function(){return promise_default.a.all([_this2.getRenderMetadata(),_this2.getFormValues()])})));case 1:case"end":return _context2.stop()}}),_callee)})))()},getRenderMetadata:function getRenderMetadata(){var _this3=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(){return regenerator_default.a.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this3.delay();case 2:return _context3.abrupt("return",promise_default.a.resolve({channels:[{id:1,code:"dy",name:"电影"},{id:2,code:"dm",name:"动漫"}]}).then((function(data){_this3.metadata=data})));case 3:case"end":return _context3.stop()}}),_callee2)})))()},getFormValues:function getFormValues(){var _this4=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee3(){return regenerator_default.a.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_this4.delay();case 2:return _context4.abrupt("return",promise_default.a.resolve({channel:2,name:"Form Builder",comment:"A powerful form builder",actor:["Yang","Zhang"],description:"What a nice tool"}).then((function(data){var formValues=_this4.formValues;_this4.updateFormValues(_objectSpread(_objectSpread({},formValues),data))})));case 3:case"end":return _context4.stop()}}),_callee3)})))()},save:function save(){var _this5=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee4(){return regenerator_default.a.wrap((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_this5.$refs.observer.validate();case 2:if(_context5.sent){_context5.next=6;break}return _this5.$message({type:"error",message:"部分表单填写错误，请检查！"}),_context5.abrupt("return");case 6:_this5.showResultModal=!0;case 7:case"end":return _context5.stop()}}),_callee4)})))()}}}}),{__STORY__:"import Vue from 'vue';\nimport VueCompositionApi from '@vue/composition-api';\nimport { useForm, useLoading } from '@fext/vue-use';\nimport ElementUI from 'element-ui';\nimport {\n  ValidationProvider,\n  ValidationObserver,\n  localize\n} from 'vee-validate/dist/vee-validate.full';\n\nimport markdown from './FormBuilder.md';\nimport { createFormBuilder } from '@/src';\nimport { ElFormAdaptor } from '@/src/el-form-adaptor';\nimport ExampleComponents from './components';\n\nimport 'element-ui/lib/theme-chalk/index.css';\nimport './style.scss';\n\nVue.use(VueCompositionApi);\nVue.use(ElementUI);\n\nlocalize({\n  zh: {\n    name: 'zh',\n    messages: {\n      max: '该字段最大长度为 {length} 个字符',\n      min: '该字段最小长度为 {length} 个字符',\n      required: '该字段不能为空'\n    }\n  }\n});\n\nlocalize('zh');\n\nVue.component('ValidationProvider', ValidationProvider);\nVue.component('ValidationObserver', ValidationObserver);\n\n// =============== Start of Basic Usage =============== //\n\nexport const BasicUsage = () => ({\n  template: `\n    <div class=\"form-builder-example\">\n      <validation-observer ref=\"observer\" v-slot=\"{ invalid }\">\n        <el-row :gutter=\"10\">\n          <el-col :span=\"12\" :xs=\"24\">\n            <el-form\n              label-width=\"80px\"\n              v-loading=\"loading\"\n            >\n              <el-card v-if=\"!formConfig.length\">\n                <div class=\"placeholder\"></div>\n              </el-card>\n              <form-builder\n                @command=\"handleCommand\"\n                :form=\"form\"\n                :shares=\"formShares\"\n                :config=\"formConfig\"\n                :metadata=\"metadata\"\n              ></form-builder>\n\n              <div class=\"form-action\">\n                <el-button :disabled=\"loading\" type=\"primary\" @click=\"save\">\n                  提交\n                </el-button>\n              </div>\n            </el-form>\n          </el-col>\n          <el-col :span=\"12\" :xs=\"24\">\n            <el-card header=\"表单配置\">\n              <el-input type=\"textarea\" v-model=\"formConfigJSON\" rows=\"45\" />\n            </el-card>\n          </el-col>\n        </el-row>\n      </validation-observer>\n      <el-dialog title=\"提交结果\" :visible.sync=\"showResultModal\" width=\"80%\">\n        <pre>{{ JSON.stringify(formValues, null, 4) }}</pre>\n        <span slot=\"footer\">\n          <el-button type=\"primary\" @click=\"showResultModal = false\">确 定</el-button>\n        </span>\n      </el-dialog>\n    </div>\n  `,\n\n  components: {\n    FormBuilder: createFormBuilder({\n      components: {\n        ElFormAdaptor,\n\n        ...ExampleComponents\n      }\n    })\n  },\n\n  setup() {\n    const form = useForm();\n    const { formValues, setInitialFormValues, updateFormValues } = form;\n    const { loading, withLoading } = useLoading();\n\n    return {\n      // from form composition\n      form,\n      formValues,\n      setInitialFormValues,\n      updateFormValues,\n\n      // from loading composition\n      loading,\n      withLoading\n    };\n  },\n\n  data() {\n    return {\n      showResultModal: false,\n\n      metadata: {},\n\n      formShares: {\n        size: 'medium',\n\n        props: {\n          clearable: true\n        }\n      },\n\n      formConfig: [],\n\n      formConfigJSON: JSON.stringify(\n        [\n          {\n            component: 'el-card',\n            props: {\n              header: '基础信息'\n            },\n            fields: [\n              {\n                name: 'channel',\n                component: 'ExampleChannel',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'name',\n                component: 'ExampleName',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'comment',\n                component: 'ElFormAdaptor',\n                label: '评语',\n                tip: '一句话评价（使用 FormAdaptor 的自定义字段）',\n                tooltip: '精彩点评',\n                rules: {\n                  required: true,\n                  max: 50,\n                  min: 10\n                },\n                props: {\n                  placeholder: '不超过 20 个字'\n                }\n              }\n            ]\n          },\n          {\n            component: 'el-card',\n            props: {\n              header: '高级信息'\n            },\n            fields: [\n              {\n                name: 'type',\n                component: 'ExampleType',\n                defaultValue: 2\n              },\n              {\n                name: 'actor',\n                component: 'ExampleActorComplex'\n              },\n              {\n                name: 'date',\n                component: 'ElFormAdaptor',\n                label: '发行日期',\n                extend: {\n                  component: 'el-date-picker'\n                },\n                props: {\n                  placeholder: '请通过日期选择器'\n                }\n              },\n              {\n                name: 'description',\n                component: 'ElFormAdaptor',\n                label: '描述',\n                tip: '剧情描述（使用 FormAdaptor 的自定义字段）',\n                rules: {\n                  max: 180\n                },\n                props: {\n                  type: 'textarea',\n                  rows: 5,\n                  placeholder: '不超过 180 个字'\n                }\n              }\n            ]\n          }\n        ],\n        null,\n        2\n      )\n    };\n  },\n\n  watch: {\n    formConfigJSON: {\n      handler(value) {\n        try {\n          this.formConfig = JSON.parse(this.formConfigJSON);\n        } catch (err) {\n          // this.formConfig = this.formConfig;\n        }\n      },\n      immediate: true\n    }\n  },\n\n  created() {\n    this.registerEvents();\n    this.renderForm();\n  },\n\n  methods: {\n    delay(timeout = 1000) {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n        }, timeout);\n      });\n    },\n\n    getInitialValues() {\n      return {};\n    },\n\n    registerEvents() {\n      this.$on('doSomething', options => {\n        this.$message({\n          type: 'success',\n          message: '触发表单事件成功！'\n        });\n      });\n    },\n\n    handleCommand(cmd, ...args) {\n      this.$emit(cmd, ...args);\n    },\n\n    async renderForm() {\n      return this.withLoading(() => {\n        return Promise.all([this.getRenderMetadata(), this.getFormValues()]);\n      });\n    },\n\n    async getRenderMetadata() {\n      await this.delay();\n\n      return Promise.resolve({\n        channels: [\n          {\n            id: 1,\n            code: 'dy',\n            name: '电影'\n          },\n          {\n            id: 2,\n            code: 'dm',\n            name: '动漫'\n          }\n        ]\n      }).then(data => {\n        this.metadata = data;\n      });\n    },\n\n    async getFormValues() {\n      await this.delay();\n\n      return Promise.resolve({\n        channel: 2,\n        name: 'Form Builder',\n        comment: 'A powerful form builder',\n        actor: ['Yang', 'Zhang'],\n        description: 'What a nice tool'\n      }).then(data => {\n        const { formValues } = this;\n\n        this.updateFormValues({\n          ...formValues,\n          ...data\n        });\n      });\n    },\n\n    async save() {\n      const valid = await this.$refs.observer.validate();\n\n      if (!valid) {\n        this.$message({\n          type: 'error',\n          message: '部分表单填写错误，请检查！'\n        });\n        return;\n      }\n\n      this.showResultModal = true;\n    }\n  }\n});\n\nBasicUsage.story = {\n  name: 'Basic Usage'\n};\n\n// =============== End of Basic Usage =============== //\n\nexport default {\n  title: 'FormBuilder|Element UI',\n  parameters: {\n    notes: {\n      markdown\n    }\n  }\n};\n",__ADDS_MAP__:{"formbuilder-element-ui--basic-usage":{startLoc:{col:26,line:40},endLoc:{col:2,line:320},startBody:{col:26,line:40},endBody:{col:2,line:320}}},__MAIN_FILE_LOCATION__:"/FormBuilder.stories.js",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/runner/work/vue-form-builder/vue-form-builder/stories/elementui",__IDS_TO_FRAMEWORKS__:{}});BasicUsage.story={name:"Basic Usage"};__webpack_exports__.default={title:"FormBuilder|Element UI",parameters:{storySource:{source:"import Vue from 'vue';\nimport VueCompositionApi from '@vue/composition-api';\nimport { useForm, useLoading } from '@fext/vue-use';\nimport ElementUI from 'element-ui';\nimport {\n  ValidationProvider,\n  ValidationObserver,\n  localize\n} from 'vee-validate/dist/vee-validate.full';\n\nimport markdown from './FormBuilder.md';\nimport { createFormBuilder } from '@/src';\nimport { ElFormAdaptor } from '@/src/el-form-adaptor';\nimport ExampleComponents from './components';\n\nimport 'element-ui/lib/theme-chalk/index.css';\nimport './style.scss';\n\nVue.use(VueCompositionApi);\nVue.use(ElementUI);\n\nlocalize({\n  zh: {\n    name: 'zh',\n    messages: {\n      max: '该字段最大长度为 {length} 个字符',\n      min: '该字段最小长度为 {length} 个字符',\n      required: '该字段不能为空'\n    }\n  }\n});\n\nlocalize('zh');\n\nVue.component('ValidationProvider', ValidationProvider);\nVue.component('ValidationObserver', ValidationObserver);\n\n// =============== Start of Basic Usage =============== //\n\nexport const BasicUsage = () => ({\n  template: `\n    <div class=\"form-builder-example\">\n      <validation-observer ref=\"observer\" v-slot=\"{ invalid }\">\n        <el-row :gutter=\"10\">\n          <el-col :span=\"12\" :xs=\"24\">\n            <el-form\n              label-width=\"80px\"\n              v-loading=\"loading\"\n            >\n              <el-card v-if=\"!formConfig.length\">\n                <div class=\"placeholder\"></div>\n              </el-card>\n              <form-builder\n                @command=\"handleCommand\"\n                :form=\"form\"\n                :shares=\"formShares\"\n                :config=\"formConfig\"\n                :metadata=\"metadata\"\n              ></form-builder>\n\n              <div class=\"form-action\">\n                <el-button :disabled=\"loading\" type=\"primary\" @click=\"save\">\n                  提交\n                </el-button>\n              </div>\n            </el-form>\n          </el-col>\n          <el-col :span=\"12\" :xs=\"24\">\n            <el-card header=\"表单配置\">\n              <el-input type=\"textarea\" v-model=\"formConfigJSON\" rows=\"45\" />\n            </el-card>\n          </el-col>\n        </el-row>\n      </validation-observer>\n      <el-dialog title=\"提交结果\" :visible.sync=\"showResultModal\" width=\"80%\">\n        <pre>{{ JSON.stringify(formValues, null, 4) }}</pre>\n        <span slot=\"footer\">\n          <el-button type=\"primary\" @click=\"showResultModal = false\">确 定</el-button>\n        </span>\n      </el-dialog>\n    </div>\n  `,\n\n  components: {\n    FormBuilder: createFormBuilder({\n      components: {\n        ElFormAdaptor,\n\n        ...ExampleComponents\n      }\n    })\n  },\n\n  setup() {\n    const form = useForm();\n    const { formValues, setInitialFormValues, updateFormValues } = form;\n    const { loading, withLoading } = useLoading();\n\n    return {\n      // from form composition\n      form,\n      formValues,\n      setInitialFormValues,\n      updateFormValues,\n\n      // from loading composition\n      loading,\n      withLoading\n    };\n  },\n\n  data() {\n    return {\n      showResultModal: false,\n\n      metadata: {},\n\n      formShares: {\n        size: 'medium',\n\n        props: {\n          clearable: true\n        }\n      },\n\n      formConfig: [],\n\n      formConfigJSON: JSON.stringify(\n        [\n          {\n            component: 'el-card',\n            props: {\n              header: '基础信息'\n            },\n            fields: [\n              {\n                name: 'channel',\n                component: 'ExampleChannel',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'name',\n                component: 'ExampleName',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'comment',\n                component: 'ElFormAdaptor',\n                label: '评语',\n                tip: '一句话评价（使用 FormAdaptor 的自定义字段）',\n                tooltip: '精彩点评',\n                rules: {\n                  required: true,\n                  max: 50,\n                  min: 10\n                },\n                props: {\n                  placeholder: '不超过 20 个字'\n                }\n              }\n            ]\n          },\n          {\n            component: 'el-card',\n            props: {\n              header: '高级信息'\n            },\n            fields: [\n              {\n                name: 'type',\n                component: 'ExampleType',\n                defaultValue: 2\n              },\n              {\n                name: 'actor',\n                component: 'ExampleActorComplex'\n              },\n              {\n                name: 'date',\n                component: 'ElFormAdaptor',\n                label: '发行日期',\n                extend: {\n                  component: 'el-date-picker'\n                },\n                props: {\n                  placeholder: '请通过日期选择器'\n                }\n              },\n              {\n                name: 'description',\n                component: 'ElFormAdaptor',\n                label: '描述',\n                tip: '剧情描述（使用 FormAdaptor 的自定义字段）',\n                rules: {\n                  max: 180\n                },\n                props: {\n                  type: 'textarea',\n                  rows: 5,\n                  placeholder: '不超过 180 个字'\n                }\n              }\n            ]\n          }\n        ],\n        null,\n        2\n      )\n    };\n  },\n\n  watch: {\n    formConfigJSON: {\n      handler(value) {\n        try {\n          this.formConfig = JSON.parse(this.formConfigJSON);\n        } catch (err) {\n          // this.formConfig = this.formConfig;\n        }\n      },\n      immediate: true\n    }\n  },\n\n  created() {\n    this.registerEvents();\n    this.renderForm();\n  },\n\n  methods: {\n    delay(timeout = 1000) {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n        }, timeout);\n      });\n    },\n\n    getInitialValues() {\n      return {};\n    },\n\n    registerEvents() {\n      this.$on('doSomething', options => {\n        this.$message({\n          type: 'success',\n          message: '触发表单事件成功！'\n        });\n      });\n    },\n\n    handleCommand(cmd, ...args) {\n      this.$emit(cmd, ...args);\n    },\n\n    async renderForm() {\n      return this.withLoading(() => {\n        return Promise.all([this.getRenderMetadata(), this.getFormValues()]);\n      });\n    },\n\n    async getRenderMetadata() {\n      await this.delay();\n\n      return Promise.resolve({\n        channels: [\n          {\n            id: 1,\n            code: 'dy',\n            name: '电影'\n          },\n          {\n            id: 2,\n            code: 'dm',\n            name: '动漫'\n          }\n        ]\n      }).then(data => {\n        this.metadata = data;\n      });\n    },\n\n    async getFormValues() {\n      await this.delay();\n\n      return Promise.resolve({\n        channel: 2,\n        name: 'Form Builder',\n        comment: 'A powerful form builder',\n        actor: ['Yang', 'Zhang'],\n        description: 'What a nice tool'\n      }).then(data => {\n        const { formValues } = this;\n\n        this.updateFormValues({\n          ...formValues,\n          ...data\n        });\n      });\n    },\n\n    async save() {\n      const valid = await this.$refs.observer.validate();\n\n      if (!valid) {\n        this.$message({\n          type: 'error',\n          message: '部分表单填写错误，请检查！'\n        });\n        return;\n      }\n\n      this.showResultModal = true;\n    }\n  }\n});\n\nBasicUsage.story = {\n  name: 'Basic Usage'\n};\n\n// =============== End of Basic Usage =============== //\n\nexport default {\n  title: 'FormBuilder|Element UI',\n  parameters: {\n    notes: {\n      markdown\n    }\n  }\n};\n",locationsMap:{"formbuilder-element-ui--basic-usage":{startLoc:{col:26,line:40},endLoc:{col:2,line:320},startBody:{col:26,line:40},endBody:{col:2,line:320}}}},notes:{markdown:"# Element UI Form Builder\n\nVue form builder with element ui.\n"}}}},1485:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"BasicUsage",(function(){return BasicUsage}));__webpack_require__(53),__webpack_require__(51),__webpack_require__(166),__webpack_require__(60),__webpack_require__(61);var define_property=__webpack_require__(101),define_property_default=__webpack_require__.n(define_property),define_properties=__webpack_require__(102),define_properties_default=__webpack_require__.n(define_properties),get_own_property_descriptors=__webpack_require__(54),get_own_property_descriptors_default=__webpack_require__.n(get_own_property_descriptors),for_each=__webpack_require__(40),for_each_default=__webpack_require__.n(for_each),get_own_property_descriptor=__webpack_require__(55),get_own_property_descriptor_default=__webpack_require__.n(get_own_property_descriptor),filter=__webpack_require__(48),filter_default=__webpack_require__.n(filter),get_own_property_symbols=__webpack_require__(56),get_own_property_symbols_default=__webpack_require__.n(get_own_property_symbols),object_keys=__webpack_require__(103),keys_default=__webpack_require__.n(object_keys),regenerator=__webpack_require__(26),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(157),__webpack_require__(57)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),concat=__webpack_require__(104),concat_default=__webpack_require__.n(concat),set_timeout=__webpack_require__(184),set_timeout_default=__webpack_require__.n(set_timeout),promise=__webpack_require__(49),promise_default=__webpack_require__.n(promise),stringify=__webpack_require__(135),stringify_default=__webpack_require__.n(stringify),defineProperty=__webpack_require__(74),defineProperty_default=__webpack_require__.n(defineProperty),vue_esm=__webpack_require__(12),vue_composition_api_module=__webpack_require__(25),index_esm=__webpack_require__(16),iview=__webpack_require__(796),iview_default=__webpack_require__.n(iview),vee_validate_full=__webpack_require__(58),src=__webpack_require__(190),adaptors_ViewFormAdaptorvue_type_script_lang_js_={name:"view-form-adaptor",props:{tip:String,tooltip:String,name:String,size:{type:String,default:"default"},label:String,rules:{type:[String,Object]},value:{required:!1},props:{type:Object,default:function _default(){return{}},required:!1},items:{type:Array,default:function _default(){return[]},required:!1},extend:{type:Object,default:function _default(){return{}}},metadata:{type:Object,default:function _default(){return{}}},formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{}},computed:{component:function component(){return this.extend.component||"Input"},isSelect:function isSelect(){return"Select"===this.component},isMultipleSelect:function isMultipleSelect(){return this.isSelect&&this.props.multiple},isRadio:function isRadio(){return"RadioGroup"===this.component},isCheckbox:function isCheckbox(){return"CheckboxGroup"===this.component}},created:function created(){var localValue=this.localValue,isMultipleSelect=this.isMultipleSelect,isCheckbox=this.isCheckbox;null==localValue&&(isMultipleSelect||isCheckbox)&&this.setInitialValue([])}},componentNormalizer=(__webpack_require__(1473),__webpack_require__(19)),ViewFormAdaptor=Object(componentNormalizer.a)(adaptors_ViewFormAdaptorvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("FormItem",{attrs:{size:_vm.size,required:_vm.isRequired,error:errors[0]},scopedSlots:_vm._u([{key:"label",fn:function(){return[_c("span",[_vm._v(_vm._s(_vm.label))]),_vm._v(" "),_vm.tooltip?_c("span",[_c("Tooltip",{attrs:{content:_vm.tooltip,placement:"top"}},[_c("Icon",{attrs:{type:"md-help-circle"}})],1)],1):_vm._e()]},proxy:!0}],null,!0)},[_vm._v(" "),_vm.isSelect?_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{input:_vm.updateLocalValue}},"component",_vm.props,!1),_vm._l(_vm.items,(function(item){return _c("Option",{key:item.value,attrs:{value:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1):_vm.isRadio?_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{input:_vm.updateLocalValue}},"component",_vm.props,!1),_vm._l(_vm.items,(function(item){return _c("Radio",{key:item.value,attrs:{label:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1):_vm.isCheckbox?_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{input:_vm.updateLocalValue}},"component",_vm.props,!1),_vm._l(_vm.items,(function(item){return _c("Checkbox",{key:item.value,attrs:{label:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1):_c(_vm.component,_vm._b({tag:"component",attrs:{value:_vm.localValue},on:{input:_vm.updateLocalValue}},"component",_vm.props,!1)),_vm._v(" "),_vm.tip?_c("div",{staticClass:"ivu-form-item-tip"},[_vm._v(_vm._s(_vm.tip))]):_vm._e()],1)]}}])})}),[],!1,null,null,null).exports,starts_with=(__webpack_require__(117),__webpack_require__(185)),starts_with_default=__webpack_require__.n(starts_with),components_ExampleChannelvue_type_script_lang_js_={name:"example-channel",props:{name:String,tip:{type:String,default:"支持中文名、拼音首字母检索"},tooltip:String,hide:Boolean,rules:{type:[String,Object]},value:{required:!1},extend:Object,metadata:Object,formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{filteredChannels:[]}},computed:{channels:function channels(){return this.metadata.channels||[]},showChannels:function showChannels(){var channels=this.channels,filteredChannels=this.filteredChannels;return filteredChannels.length?filteredChannels:channels}},methods:{filterChannel:function filterChannel(word){var _context,like=function(str){return starts_with_default()(str).call(str,word)};word?this.filteredChannels=filter_default()(_context=this.channels).call(_context,(function(ch){return like(ch.name)||like(ch.code)})):this.filteredChannels=this.channels}}},ExampleChannel=Object(componentNormalizer.a)(components_ExampleChannelvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("FormItem",{attrs:{label:"频道",size:"default",required:_vm.isRequired,error:errors[0]}},[_c("Select",{attrs:{clearable:"",filterable:"",value:_vm.localValue,placeholder:"请输入关键词进行搜索"},on:{input:_vm.updateLocalValue}},_vm._l(_vm.showChannels,(function(ch){return _c("Option",{key:ch.id,attrs:{value:ch.id,label:ch.name}},[_c("span",[_vm._v(_vm._s(ch.name)+" - "+_vm._s(ch.id))])])})),1),_vm._v(" "),_vm.tip?_c("div",{staticClass:"ivu-form-item-tip"},[_vm._v(_vm._s(_vm.tip))]):_vm._e()],1)]}}])})}),[],!1,null,"7f15fcb2",null).exports,components_ExampleNamevue_type_script_lang_js_={name:"example-name",props:{name:String,tip:String,tooltip:String,hide:Boolean,rules:{type:[String,Object]},extend:Object,metadata:Object,value:{required:!1},formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{}},methods:{doSomething:function doSomething(){this.$emit("command","doSomething",{id:123456})}}},ExampleName=Object(componentNormalizer.a)(components_ExampleNamevue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("FormItem",{attrs:{label:"标题",size:"default",required:_vm.isRequired,error:errors[0]}},[_c("Input",{attrs:{clearable:"",value:_vm.localValue,type:"text",placeholder:"标题"},on:{input:_vm.updateLocalValue},scopedSlots:_vm._u([{key:"append",fn:function(){return[_c("Tooltip",{attrs:{content:"通过事件触发整体表单操作",placement:"top"}},[_c("Button",{attrs:{icon:"md-call"},on:{click:_vm.doSomething}},[_vm._v("触发表单事件")])],1)]},proxy:!0}],null,!0)}),_vm._v(" "),_vm.tip?_c("div",{staticClass:"ivu-form-item-tip"},[_vm._v(_vm._s(_vm.tip))]):_vm._e()],1)]}}])})}),[],!1,null,"62c94fef",null).exports,components_ExampleTypevue_type_script_lang_js_={name:"example-type",props:{name:String,tip:String,tooltip:String,hide:Boolean,rules:{type:[String,Object]},value:{required:!1},defaultValue:{required:!1},items:{type:Array,default:function _default(){return[{value:1,text:"正片"},{value:2,text:"花絮"}]}},extend:Object,metadata:Object,formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{}},created:function created(){this.localValue||this.setInitialValue(this.defaultValue)}},ExampleType=Object(componentNormalizer.a)(components_ExampleTypevue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("FormItem",{attrs:{label:"节目类型",size:"default",required:_vm.isRequired,error:errors[0]}},[_c("RadioGroup",{attrs:{value:_vm.localValue},on:{input:_vm.updateLocalValue}},_vm._l(_vm.items,(function(item){return _c("Radio",{key:item.value,attrs:{label:item.value}},[_vm._v("\n        "+_vm._s(item.text)+"\n      ")])})),1),_vm._v(" "),_vm.tip?_c("div",{staticClass:"ivu-form-item-tip"},[_vm._v(_vm._s(_vm.tip))]):_vm._e()],1)]}}])})}),[],!1,null,"178554fc",null).exports,slicedToArray=__webpack_require__(186),slicedToArray_default=__webpack_require__.n(slicedToArray),components_ExampleActorComplexvue_type_script_lang_js_={name:"example-actor-complex",props:{name:String,tip:{type:String,default:"必须同时填写导演、主演才有效"},tooltip:String,hide:Boolean,rules:{type:[String,Object]},value:{required:!1},extend:Object,metadata:Object,formValues:{type:Object,required:!1}},setup:function setup(props,context){var _useFormElement=Object(index_esm.b)(props,context);return{dirty:_useFormElement.dirty,isRequired:_useFormElement.isRequired,localValue:_useFormElement.localValue,watchPropValue:_useFormElement.watchPropValue,setInitialValue:_useFormElement.setInitialValue,updateLocalValue:_useFormElement.updateLocalValue}},data:function data(){return{actor:{director:"",protagonist:""}}},watch:{actor:{handler:function handler(){this.updateLocalValue(this.getActorValue())},deep:!0}},created:function created(){var _this=this;this.setActorValue(this.value),this.watchPropValue((function(value){_this.setActorValue(value)}))},methods:{getActorValue:function getActorValue(){var _this$actor=this.actor,director=_this$actor.director,protagonist=_this$actor.protagonist;return director&&protagonist?[director,protagonist]:[]},setActorValue:function setActorValue(){var value=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],_value=slicedToArray_default()(value,2),_value$=_value[0],director=void 0===_value$?"":_value$,_value$2=_value[1],protagonist=void 0===_value$2?"":_value$2;this.actor={director:director,protagonist:protagonist}}}},components={ExampleChannel:ExampleChannel,ExampleName:ExampleName,ExampleType:ExampleType,ExampleActorComplex:Object(componentNormalizer.a)(components_ExampleActorComplexvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("FormItem",{attrs:{label:"人物",required:_vm.isRequired,error:errors[0]}},[_c("Input",{attrs:{clearable:"",type:"text",placeholder:"请填写导演姓名"},model:{value:_vm.actor.director,callback:function($$v){_vm.$set(_vm.actor,"director",$$v)},expression:"actor.director"}},[_c("template",{slot:"prepend"},[_vm._v("导演")])],2)],1)]}}])}),_vm._v(" "),_c("validation-provider",{attrs:{rules:_vm.rules},scopedSlots:_vm._u([{key:"default",fn:function(ref){var errors=ref.errors;return[_c("FormItem",{attrs:{size:"default",error:errors[0]}},[_c("Input",{attrs:{clearable:"",type:"text",placeholder:"请填写主演姓名"},model:{value:_vm.actor.protagonist,callback:function($$v){_vm.$set(_vm.actor,"protagonist",$$v)},expression:"actor.protagonist"}},[_c("template",{slot:"prepend"},[_vm._v("主演")])],2),_vm._v(" "),_vm.tip?_c("div",{staticClass:"ivu-form-item-tip"},[_vm._v(_vm._s(_vm.tip))]):_vm._e()],1)]}}])})],1)}),[],!1,null,"c34bd9c0",null).exports};__webpack_require__(1475),__webpack_require__(1481);function ownKeys(object,enumerableOnly){var keys=keys_default()(object);if(get_own_property_symbols_default.a){var symbols=get_own_property_symbols_default()(object);enumerableOnly&&(symbols=filter_default()(symbols).call(symbols,(function(sym){return get_own_property_descriptor_default()(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++){var _context6;if(source=null!=arguments[i]?arguments[i]:{},i%2)for_each_default()(_context6=ownKeys(Object(source),!0)).call(_context6,(function(key){defineProperty_default()(target,key,source[key])}));else if(get_own_property_descriptors_default.a)define_properties_default()(target,get_own_property_descriptors_default()(source));else{var _context7;for_each_default()(_context7=ownKeys(Object(source))).call(_context7,(function(key){define_property_default()(target,key,get_own_property_descriptor_default()(source,key))}))}}return target}__webpack_require__(179).withSource;var addSourceDecorator=__webpack_require__(179).addSource;vue_esm.default.use(vue_composition_api_module.b),vue_esm.default.use(iview_default.a),Object(vee_validate_full.localize)({zh:{name:"zh",messages:{max:"该字段最大长度为 {length} 个字符",min:"该字段最小长度为 {length} 个字符",required:"该字段不能为空"}}}),Object(vee_validate_full.localize)("zh"),vue_esm.default.component("ValidationProvider",vee_validate_full.ValidationProvider),vue_esm.default.component("ValidationObserver",vee_validate_full.ValidationObserver);var BasicUsage=addSourceDecorator((function(){return{template:'\n    <div class="form-builder-example">\n      <validation-observer ref="observer" v-slot="{ invalid }">\n        <Row :gutter="10">\n          <Col :span="12">\n            <Form :label-width="80">\n              <Spin fix size="large" v-if="loading" />\n              <Card v-if="!formConfig.length">\n                <div class="placeholder"></div>\n              </Card>\n              <form-builder\n                @command="handleCommand"\n                :form="form"\n                :shares="formShares"\n                :config="formConfig"\n                :metadata="metadata"\n              ></form-builder>\n\n              <div class="form-action">\n                <Button :disabled="loading" type="primary" @click="save">\n                  提交\n                </Button>\n              </div>\n            </Form>\n          </Col>\n          <Col :span="12">\n            <Card title="表单配置">\n              <Input type="textarea" v-model="formConfigJSON" :rows="45" />\n            </Card>\n          </Col>\n        </Row>\n      </validation-observer>\n      <Modal title="提交结果" v-model="showResultModal" width="80%">\n        <pre>{{ JSON.stringify(formValues, null, 4) }}</pre>\n        <span slot="footer">\n          <Button type="primary" @click="showResultModal = false">确 定</Button>\n        </span>\n      </Modal>\n    </div>\n  ',components:{FormBuilder:Object(src.a)({components:_objectSpread({ViewFormAdaptor:ViewFormAdaptor},components)})},setup:function setup(){var form=Object(index_esm.a)(),formValues=form.formValues,setInitialFormValues=form.setInitialFormValues,updateFormValues=form.updateFormValues,_useLoading=Object(index_esm.c)();return{form:form,formValues:formValues,setInitialFormValues:setInitialFormValues,updateFormValues:updateFormValues,loading:_useLoading.loading,withLoading:_useLoading.withLoading}},data:function data(){return{showResultModal:!1,metadata:{},formShares:{size:"default",props:{clearable:!0}},formConfig:[],formConfigJSON:stringify_default()([{component:"Card",props:{title:"基础信息"},fields:[{name:"channel",component:"ExampleChannel",rules:{required:!0}},{name:"name",component:"ExampleName",rules:{required:!0}},{name:"comment",component:"ViewFormAdaptor",label:"评语",tip:"一句话评价（使用 FormAdaptor 的自定义字段）",tooltip:"精彩点评",rules:{required:!0,max:50,min:10},props:{placeholder:"不超过 20 个字"}}]},{component:"Card",props:{title:"高级信息"},fields:[{name:"type",component:"ExampleType",defaultValue:2},{name:"actor",component:"ExampleActorComplex"},{name:"date",component:"ViewFormAdaptor",label:"发行日期",extend:{component:"DatePicker"},props:{placeholder:"请通过日期选择器"}},{name:"description",component:"ViewFormAdaptor",label:"描述",tip:"剧情描述（使用 FormAdaptor 的自定义字段）",rules:{max:180},props:{type:"textarea",rows:5,placeholder:"不超过 180 个字"}}]}],null,2)}},watch:{formConfigJSON:{handler:function handler(){try{this.formConfig=JSON.parse(this.formConfigJSON)}catch(err){}},immediate:!0}},created:function created(){this.registerEvents(),this.renderForm()},methods:{delay:function delay(){var timeout=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;return new promise_default.a((function(resolve){set_timeout_default()((function(){resolve()}),timeout)}))},getInitialValues:function getInitialValues(){return{}},registerEvents:function registerEvents(){var _this=this;this.$on("doSomething",(function(){_this.$message({type:"success",message:"触发表单事件成功！"})}))},handleCommand:function handleCommand(cmd){for(var _context,_len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];this.$emit.apply(this,concat_default()(_context=[cmd]).call(_context,args))},renderForm:function renderForm(){var _this2=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",_this2.withLoading((function(){return promise_default.a.all([_this2.getRenderMetadata(),_this2.getFormValues()])})));case 1:case"end":return _context2.stop()}}),_callee)})))()},getRenderMetadata:function getRenderMetadata(){var _this3=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(){return regenerator_default.a.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this3.delay();case 2:return _context3.abrupt("return",promise_default.a.resolve({channels:[{id:1,code:"dy",name:"电影"},{id:2,code:"dm",name:"动漫"}]}).then((function(data){_this3.metadata=data})));case 3:case"end":return _context3.stop()}}),_callee2)})))()},getFormValues:function getFormValues(){var _this4=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee3(){return regenerator_default.a.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_this4.delay();case 2:return _context4.abrupt("return",promise_default.a.resolve({channel:2,name:"Form Builder",comment:"A powerful form builder",actor:["Yang","Zhang"],description:"What a nice tool"}).then((function(data){var formValues=_this4.formValues;_this4.updateFormValues(_objectSpread(_objectSpread({},formValues),data))})));case 3:case"end":return _context4.stop()}}),_callee3)})))()},save:function save(){var _this5=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee4(){return regenerator_default.a.wrap((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_this5.$refs.observer.validate();case 2:if(_context5.sent){_context5.next=6;break}return _this5.$message({type:"error",message:"部分表单填写错误，请检查！"}),_context5.abrupt("return");case 6:_this5.showResultModal=!0;case 7:case"end":return _context5.stop()}}),_callee4)})))()}}}}),{__STORY__:"import Vue from 'vue';\nimport VueCompositionApi from '@vue/composition-api';\nimport { useForm, useLoading } from '@fext/vue-use';\nimport ViewUI from 'view-design';\nimport {\n  ValidationProvider,\n  ValidationObserver,\n  localize\n} from 'vee-validate/dist/vee-validate.full';\n\nimport markdown from './FormBuilder.md';\nimport { createFormBuilder } from '@/src';\nimport { ViewFormAdaptor } from '@/src/view-form-adaptor';\nimport ExampleComponents from './components';\n\nimport 'view-design/dist/styles/iview.css';\nimport './style.scss';\n\nVue.use(VueCompositionApi);\nVue.use(ViewUI);\n\nlocalize({\n  zh: {\n    name: 'zh',\n    messages: {\n      max: '该字段最大长度为 {length} 个字符',\n      min: '该字段最小长度为 {length} 个字符',\n      required: '该字段不能为空'\n    }\n  }\n});\n\nlocalize('zh');\n\nVue.component('ValidationProvider', ValidationProvider);\nVue.component('ValidationObserver', ValidationObserver);\n\n// =============== Start of Basic Usage =============== //\n\nexport const BasicUsage = () => ({\n  template: `\n    <div class=\"form-builder-example\">\n      <validation-observer ref=\"observer\" v-slot=\"{ invalid }\">\n        <Row :gutter=\"10\">\n          <Col :span=\"12\">\n            <Form :label-width=\"80\">\n              <Spin fix size=\"large\" v-if=\"loading\" />\n              <Card v-if=\"!formConfig.length\">\n                <div class=\"placeholder\"></div>\n              </Card>\n              <form-builder\n                @command=\"handleCommand\"\n                :form=\"form\"\n                :shares=\"formShares\"\n                :config=\"formConfig\"\n                :metadata=\"metadata\"\n              ></form-builder>\n\n              <div class=\"form-action\">\n                <Button :disabled=\"loading\" type=\"primary\" @click=\"save\">\n                  提交\n                </Button>\n              </div>\n            </Form>\n          </Col>\n          <Col :span=\"12\">\n            <Card title=\"表单配置\">\n              <Input type=\"textarea\" v-model=\"formConfigJSON\" :rows=\"45\" />\n            </Card>\n          </Col>\n        </Row>\n      </validation-observer>\n      <Modal title=\"提交结果\" v-model=\"showResultModal\" width=\"80%\">\n        <pre>{{ JSON.stringify(formValues, null, 4) }}</pre>\n        <span slot=\"footer\">\n          <Button type=\"primary\" @click=\"showResultModal = false\">确 定</Button>\n        </span>\n      </Modal>\n    </div>\n  `,\n\n  components: {\n    FormBuilder: createFormBuilder({\n      components: {\n        ViewFormAdaptor,\n\n        ...ExampleComponents\n      }\n    })\n  },\n\n  setup() {\n    const form = useForm();\n    const { formValues, setInitialFormValues, updateFormValues } = form;\n    const { loading, withLoading } = useLoading();\n\n    return {\n      // from form composition\n      form,\n      formValues,\n      setInitialFormValues,\n      updateFormValues,\n\n      // from loading composition\n      loading,\n      withLoading\n    };\n  },\n\n  data() {\n    return {\n      showResultModal: false,\n\n      metadata: {},\n\n      formShares: {\n        size: 'default',\n\n        props: {\n          clearable: true\n        }\n      },\n\n      formConfig: [],\n\n      formConfigJSON: JSON.stringify(\n        [\n          {\n            component: 'Card',\n            props: {\n              title: '基础信息'\n            },\n            fields: [\n              {\n                name: 'channel',\n                component: 'ExampleChannel',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'name',\n                component: 'ExampleName',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'comment',\n                component: 'ViewFormAdaptor',\n                label: '评语',\n                tip: '一句话评价（使用 FormAdaptor 的自定义字段）',\n                tooltip: '精彩点评',\n                rules: {\n                  required: true,\n                  max: 50,\n                  min: 10\n                },\n                props: {\n                  placeholder: '不超过 20 个字'\n                }\n              }\n            ]\n          },\n          {\n            component: 'Card',\n            props: {\n              title: '高级信息'\n            },\n            fields: [\n              {\n                name: 'type',\n                component: 'ExampleType',\n                defaultValue: 2\n              },\n              {\n                name: 'actor',\n                component: 'ExampleActorComplex'\n              },\n              {\n                name: 'date',\n                component: 'ViewFormAdaptor',\n                label: '发行日期',\n                extend: {\n                  component: 'DatePicker'\n                },\n                props: {\n                  placeholder: '请通过日期选择器'\n                }\n              },\n              {\n                name: 'description',\n                component: 'ViewFormAdaptor',\n                label: '描述',\n                tip: '剧情描述（使用 FormAdaptor 的自定义字段）',\n                rules: {\n                  max: 180\n                },\n                props: {\n                  type: 'textarea',\n                  rows: 5,\n                  placeholder: '不超过 180 个字'\n                }\n              }\n            ]\n          }\n        ],\n        null,\n        2\n      )\n    };\n  },\n\n  watch: {\n    formConfigJSON: {\n      handler(value) {\n        try {\n          this.formConfig = JSON.parse(this.formConfigJSON);\n        } catch (err) {\n          // this.formConfig = this.formConfig;\n        }\n      },\n      immediate: true\n    }\n  },\n\n  created() {\n    this.registerEvents();\n    this.renderForm();\n  },\n\n  methods: {\n    delay(timeout = 1000) {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n        }, timeout);\n      });\n    },\n\n    getInitialValues() {\n      return {};\n    },\n\n    registerEvents() {\n      this.$on('doSomething', options => {\n        this.$message({\n          type: 'success',\n          message: '触发表单事件成功！'\n        });\n      });\n    },\n\n    handleCommand(cmd, ...args) {\n      this.$emit(cmd, ...args);\n    },\n\n    async renderForm() {\n      return this.withLoading(() => {\n        return Promise.all([this.getRenderMetadata(), this.getFormValues()]);\n      });\n    },\n\n    async getRenderMetadata() {\n      await this.delay();\n\n      return Promise.resolve({\n        channels: [\n          {\n            id: 1,\n            code: 'dy',\n            name: '电影'\n          },\n          {\n            id: 2,\n            code: 'dm',\n            name: '动漫'\n          }\n        ]\n      }).then(data => {\n        this.metadata = data;\n      });\n    },\n\n    async getFormValues() {\n      await this.delay();\n\n      return Promise.resolve({\n        channel: 2,\n        name: 'Form Builder',\n        comment: 'A powerful form builder',\n        actor: ['Yang', 'Zhang'],\n        description: 'What a nice tool'\n      }).then(data => {\n        const { formValues } = this;\n\n        this.updateFormValues({\n          ...formValues,\n          ...data\n        });\n      });\n    },\n\n    async save() {\n      const valid = await this.$refs.observer.validate();\n\n      if (!valid) {\n        this.$message({\n          type: 'error',\n          message: '部分表单填写错误，请检查！'\n        });\n        return;\n      }\n\n      this.showResultModal = true;\n    }\n  }\n});\n\nBasicUsage.story = {\n  name: 'Basic Usage'\n};\n\n// =============== End of Basic Usage =============== //\n\nexport default {\n  title: 'FormBuilder|View UI',\n  parameters: {\n    notes: {\n      markdown\n    }\n  }\n};\n",__ADDS_MAP__:{"formbuilder-view-ui--basic-usage":{startLoc:{col:26,line:40},endLoc:{col:2,line:318},startBody:{col:26,line:40},endBody:{col:2,line:318}}},__MAIN_FILE_LOCATION__:"/FormBuilder.stories.js",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/runner/work/vue-form-builder/vue-form-builder/stories/viewui",__IDS_TO_FRAMEWORKS__:{}});BasicUsage.story={name:"Basic Usage"};__webpack_exports__.default={title:"FormBuilder|View UI",parameters:{storySource:{source:"import Vue from 'vue';\nimport VueCompositionApi from '@vue/composition-api';\nimport { useForm, useLoading } from '@fext/vue-use';\nimport ViewUI from 'view-design';\nimport {\n  ValidationProvider,\n  ValidationObserver,\n  localize\n} from 'vee-validate/dist/vee-validate.full';\n\nimport markdown from './FormBuilder.md';\nimport { createFormBuilder } from '@/src';\nimport { ViewFormAdaptor } from '@/src/view-form-adaptor';\nimport ExampleComponents from './components';\n\nimport 'view-design/dist/styles/iview.css';\nimport './style.scss';\n\nVue.use(VueCompositionApi);\nVue.use(ViewUI);\n\nlocalize({\n  zh: {\n    name: 'zh',\n    messages: {\n      max: '该字段最大长度为 {length} 个字符',\n      min: '该字段最小长度为 {length} 个字符',\n      required: '该字段不能为空'\n    }\n  }\n});\n\nlocalize('zh');\n\nVue.component('ValidationProvider', ValidationProvider);\nVue.component('ValidationObserver', ValidationObserver);\n\n// =============== Start of Basic Usage =============== //\n\nexport const BasicUsage = () => ({\n  template: `\n    <div class=\"form-builder-example\">\n      <validation-observer ref=\"observer\" v-slot=\"{ invalid }\">\n        <Row :gutter=\"10\">\n          <Col :span=\"12\">\n            <Form :label-width=\"80\">\n              <Spin fix size=\"large\" v-if=\"loading\" />\n              <Card v-if=\"!formConfig.length\">\n                <div class=\"placeholder\"></div>\n              </Card>\n              <form-builder\n                @command=\"handleCommand\"\n                :form=\"form\"\n                :shares=\"formShares\"\n                :config=\"formConfig\"\n                :metadata=\"metadata\"\n              ></form-builder>\n\n              <div class=\"form-action\">\n                <Button :disabled=\"loading\" type=\"primary\" @click=\"save\">\n                  提交\n                </Button>\n              </div>\n            </Form>\n          </Col>\n          <Col :span=\"12\">\n            <Card title=\"表单配置\">\n              <Input type=\"textarea\" v-model=\"formConfigJSON\" :rows=\"45\" />\n            </Card>\n          </Col>\n        </Row>\n      </validation-observer>\n      <Modal title=\"提交结果\" v-model=\"showResultModal\" width=\"80%\">\n        <pre>{{ JSON.stringify(formValues, null, 4) }}</pre>\n        <span slot=\"footer\">\n          <Button type=\"primary\" @click=\"showResultModal = false\">确 定</Button>\n        </span>\n      </Modal>\n    </div>\n  `,\n\n  components: {\n    FormBuilder: createFormBuilder({\n      components: {\n        ViewFormAdaptor,\n\n        ...ExampleComponents\n      }\n    })\n  },\n\n  setup() {\n    const form = useForm();\n    const { formValues, setInitialFormValues, updateFormValues } = form;\n    const { loading, withLoading } = useLoading();\n\n    return {\n      // from form composition\n      form,\n      formValues,\n      setInitialFormValues,\n      updateFormValues,\n\n      // from loading composition\n      loading,\n      withLoading\n    };\n  },\n\n  data() {\n    return {\n      showResultModal: false,\n\n      metadata: {},\n\n      formShares: {\n        size: 'default',\n\n        props: {\n          clearable: true\n        }\n      },\n\n      formConfig: [],\n\n      formConfigJSON: JSON.stringify(\n        [\n          {\n            component: 'Card',\n            props: {\n              title: '基础信息'\n            },\n            fields: [\n              {\n                name: 'channel',\n                component: 'ExampleChannel',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'name',\n                component: 'ExampleName',\n                rules: {\n                  required: true\n                }\n              },\n              {\n                name: 'comment',\n                component: 'ViewFormAdaptor',\n                label: '评语',\n                tip: '一句话评价（使用 FormAdaptor 的自定义字段）',\n                tooltip: '精彩点评',\n                rules: {\n                  required: true,\n                  max: 50,\n                  min: 10\n                },\n                props: {\n                  placeholder: '不超过 20 个字'\n                }\n              }\n            ]\n          },\n          {\n            component: 'Card',\n            props: {\n              title: '高级信息'\n            },\n            fields: [\n              {\n                name: 'type',\n                component: 'ExampleType',\n                defaultValue: 2\n              },\n              {\n                name: 'actor',\n                component: 'ExampleActorComplex'\n              },\n              {\n                name: 'date',\n                component: 'ViewFormAdaptor',\n                label: '发行日期',\n                extend: {\n                  component: 'DatePicker'\n                },\n                props: {\n                  placeholder: '请通过日期选择器'\n                }\n              },\n              {\n                name: 'description',\n                component: 'ViewFormAdaptor',\n                label: '描述',\n                tip: '剧情描述（使用 FormAdaptor 的自定义字段）',\n                rules: {\n                  max: 180\n                },\n                props: {\n                  type: 'textarea',\n                  rows: 5,\n                  placeholder: '不超过 180 个字'\n                }\n              }\n            ]\n          }\n        ],\n        null,\n        2\n      )\n    };\n  },\n\n  watch: {\n    formConfigJSON: {\n      handler(value) {\n        try {\n          this.formConfig = JSON.parse(this.formConfigJSON);\n        } catch (err) {\n          // this.formConfig = this.formConfig;\n        }\n      },\n      immediate: true\n    }\n  },\n\n  created() {\n    this.registerEvents();\n    this.renderForm();\n  },\n\n  methods: {\n    delay(timeout = 1000) {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n        }, timeout);\n      });\n    },\n\n    getInitialValues() {\n      return {};\n    },\n\n    registerEvents() {\n      this.$on('doSomething', options => {\n        this.$message({\n          type: 'success',\n          message: '触发表单事件成功！'\n        });\n      });\n    },\n\n    handleCommand(cmd, ...args) {\n      this.$emit(cmd, ...args);\n    },\n\n    async renderForm() {\n      return this.withLoading(() => {\n        return Promise.all([this.getRenderMetadata(), this.getFormValues()]);\n      });\n    },\n\n    async getRenderMetadata() {\n      await this.delay();\n\n      return Promise.resolve({\n        channels: [\n          {\n            id: 1,\n            code: 'dy',\n            name: '电影'\n          },\n          {\n            id: 2,\n            code: 'dm',\n            name: '动漫'\n          }\n        ]\n      }).then(data => {\n        this.metadata = data;\n      });\n    },\n\n    async getFormValues() {\n      await this.delay();\n\n      return Promise.resolve({\n        channel: 2,\n        name: 'Form Builder',\n        comment: 'A powerful form builder',\n        actor: ['Yang', 'Zhang'],\n        description: 'What a nice tool'\n      }).then(data => {\n        const { formValues } = this;\n\n        this.updateFormValues({\n          ...formValues,\n          ...data\n        });\n      });\n    },\n\n    async save() {\n      const valid = await this.$refs.observer.validate();\n\n      if (!valid) {\n        this.$message({\n          type: 'error',\n          message: '部分表单填写错误，请检查！'\n        });\n        return;\n      }\n\n      this.showResultModal = true;\n    }\n  }\n});\n\nBasicUsage.story = {\n  name: 'Basic Usage'\n};\n\n// =============== End of Basic Usage =============== //\n\nexport default {\n  title: 'FormBuilder|View UI',\n  parameters: {\n    notes: {\n      markdown\n    }\n  }\n};\n",locationsMap:{"formbuilder-view-ui--basic-usage":{startLoc:{col:26,line:40},endLoc:{col:2,line:318},startBody:{col:26,line:40},endBody:{col:2,line:318}}}},notes:{markdown:"# View UI Form Builder\n\nVue form builder with view ui.\n"}}}},190:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createFormBuilder}));var define_property=__webpack_require__(101),define_property_default=__webpack_require__.n(define_property),define_properties=__webpack_require__(102),define_properties_default=__webpack_require__.n(define_properties),get_own_property_descriptors=__webpack_require__(54),get_own_property_descriptors_default=__webpack_require__.n(get_own_property_descriptors),for_each=__webpack_require__(40),for_each_default=__webpack_require__.n(for_each),get_own_property_descriptor=__webpack_require__(55),get_own_property_descriptor_default=__webpack_require__.n(get_own_property_descriptor),filter=__webpack_require__(48),filter_default=__webpack_require__.n(filter),get_own_property_symbols=__webpack_require__(56),get_own_property_symbols_default=__webpack_require__.n(get_own_property_symbols),object_keys=__webpack_require__(103),keys_default=__webpack_require__.n(object_keys),defineProperty=__webpack_require__(74),defineProperty_default=__webpack_require__.n(defineProperty),concat=(__webpack_require__(117),__webpack_require__(104)),concat_default=__webpack_require__.n(concat),stringify=__webpack_require__(135),stringify_default=__webpack_require__.n(stringify),map=__webpack_require__(780),map_default=__webpack_require__.n(map),cjs=__webpack_require__(781),cjs_default=__webpack_require__.n(cjs),components_FormBuildervue_type_script_lang_js_={name:"form-builder",props:{form:{type:Object,required:!0},shares:{type:Object,default:function _default(){return{}}},config:{type:Array,required:!0},metadata:{type:Object,default:function _default(){return{}}}},setup:function setup(props){var _props$form=props.form;return{formValues:_props$form.formValues,updateFormValues:_props$form.updateFormValues}},data:function data(){return{}},computed:{},created:function created(){this.prepare()},methods:{prepare:function prepare(){var config=this.config,shares=this.shares,formValues=this.formValues,initialValues={};for_each_default()(config).call(config,(function(group,index){var _context;group._key="group_".concat(index),group.fields=group.fields||[],group.component=group.component||"div",group.fields=map_default()(_context=group.fields).call(_context,(function(comp){if(!comp.name)throw new Error("FormBuilder: name is required, config - ".concat(stringify_default()(comp)));return null!=comp.defaultValue&&null==formValues[comp.name]&&(initialValues[comp.name]=comp.defaultValue),cjs_default.a.all([{},shares,comp])}))})),this.updateFormValues(initialValues)},handleCommand:function handleCommand(){for(var _context2,_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.$emit.apply(this,concat_default()(_context2=["command"]).call(_context2,args))}}},componentNormalizer=__webpack_require__(19),FormBuilder=Object(componentNormalizer.a)(components_FormBuildervue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",_vm._l(_vm.config,(function(group){return _c(group.component,_vm._b({key:group._key,tag:"component"},"component",group.props,!1),_vm._l(group.fields,(function(comp){return _c(comp.component,_vm._b({key:comp.name,tag:"component",attrs:{tip:comp.tip,tooltip:comp.tooltip,name:comp.name,hide:comp.hide,rules:comp.rules,label:comp.label,items:comp.items,props:comp.props,extend:comp.extend,metadata:_vm.metadata,formValues:_vm.formValues},on:{command:_vm.handleCommand},model:{value:_vm.formValues[comp.name],callback:function($$v){_vm.$set(_vm.formValues,comp.name,$$v)},expression:"formValues[comp.name]"}},"component",comp.props,!1))})),1)})),1)}),[],!1,null,null,null).exports;function ownKeys(object,enumerableOnly){var keys=keys_default()(object);if(get_own_property_symbols_default.a){var symbols=get_own_property_symbols_default()(object);enumerableOnly&&(symbols=filter_default()(symbols).call(symbols,(function(sym){return get_own_property_descriptor_default()(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++){var _context;if(source=null!=arguments[i]?arguments[i]:{},i%2)for_each_default()(_context=ownKeys(Object(source),!0)).call(_context,(function(key){defineProperty_default()(target,key,source[key])}));else if(get_own_property_descriptors_default.a)define_properties_default()(target,get_own_property_descriptors_default()(source));else{var _context2;for_each_default()(_context2=ownKeys(Object(source))).call(_context2,(function(key){define_property_default()(target,key,get_own_property_descriptor_default()(source,key))}))}}return target}var createFormBuilder=function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _objectSpread(_objectSpread({},FormBuilder),options)}},298:function(module,exports,__webpack_require__){var api=__webpack_require__(121),content=__webpack_require__(1308);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},299:function(module,exports,__webpack_require__){var api=__webpack_require__(121),content=__webpack_require__(1466);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},300:function(module,exports,__webpack_require__){var api=__webpack_require__(121),content=__webpack_require__(1474);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},800:function(module,exports,__webpack_require__){__webpack_require__(801),__webpack_require__(947),module.exports=__webpack_require__(948)},865:function(module,exports){},948:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(309),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(773),_storybook_theming__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(774);Object(_storybook_vue__WEBPACK_IMPORTED_MODULE_0__.addParameters)({options:{theme:_storybook_theming__WEBPACK_IMPORTED_MODULE_2__.themes.light}}),Object(_storybook_vue__WEBPACK_IMPORTED_MODULE_0__.addDecorator)(Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_1__.withKnobs)({escapeHTML:!1})),Object(_storybook_vue__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(1194)],module)}.call(this,__webpack_require__(949)(module))}},[[800,1,2]]]);
//# sourceMappingURL=main.1d040da9ce8acec9d801.bundle.js.map